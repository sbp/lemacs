
#!/bin/sh
#### Configuration script for Lucid Emacs.
#### Copyright (C) 1994 Free Software Foundation, Inc.

### Don't edit this script!
### This script was automatically generated by the `autoconf' program
### from the file `./configure.in'.
### To rebuild it, execute the command
###	autoconf
### in the this directory.  You must have autoconf version 1.8 or later.

### This file is part of Lucid Emacs.

### Lucid Emacs is free software; you can redistribute it and/or modify
### it under the terms of the GNU General Public License as published by
### the Free Software Foundation; either version 2, or (at your option)
### any later version.

### Lucid Emacs is distributed in the hope that it will be useful,
### but WITHOUT ANY WARRANTY; without even the implied warranty of
### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
### GNU General Public License for more details.

### You should have received a copy of the GNU General Public License
### along with GNU Emacs; see the file COPYING.  If not, write to
### the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.

### Since Emacs has configuration requirements that autoconf can't
### meet, this file is an unholy marriage of custom-baked
### configuration code and autoconf macros.
###
### We use the m4 quoting characters [ ] (as established by the
### autoconf system) to include large sections of raw sewage - Oops, I
### mean, shell code - in the final configuration script.
###
### Usage: configure config_name
###
### If configure succeeds, it leaves its status in config.status.
### If configure fails after disturbing the status quo,
### 	config.status is removed.

### Remove any more than one leading "." element from the path name.
### If we don't remove them, then another "./" will be prepended to
### the file name each time we use config.status, and the program name
### will get larger and larger.  This wouldn't be a problem, except
### that since progname gets recorded in all the Makefiles this script
### produces, move-if-change thinks they're different when they're
### not.
###
### It would be nice if we could put the ./ in a \( \) group and then
### apply the * operator to that, so we remove as many leading ./././'s
### as are present, but some seds (like Ultrix's sed) don't allow you to
### apply * to a \( \) group.  Bleah.
progname="`echo $0 | sed 's:^\./\./:\./:'`"


### Establish some default values.
prefix='/usr/local'
exec_prefix='${prefix}'
bindir='${exec_prefix}/bin'
datadir='${prefix}/lib'
statedir='${prefix}/lib'
libdir='${exec_prefix}/lib'
mandir='${prefix}/man/man1'
infodir='${prefix}/lib/lemacs-${version}/info'
lispdir='${datadir}/lemacs-${version}/lisp'
sitelispdir='${datadir}/lemacs/site-lisp'
etcdir='${datadir}/lemacs-${version}/etc'
lockdir='${statedir}/lemacs/lock'
archlibdir='${libdir}/lemacs-${version}/${configuration}'
with_lucid='yes'
const_is_losing='yes'
dont_have_xmu=''
rel_alloc=''
cflags=''
dynamic=''
with_x11='yes'
rel_alloc='no'
internal_makefile_list='Makefile lib-src/Makefile src/Makefile.in lwlib/Makefile.in'
energize_version='no'

# On Sun systems, people sometimes set up the variable CPP
# with a value that is a directory, not an executable at all.
# Detect that case, and ignore that value.
if [ "x$CPP" != x ] && [ -d "$CPP" ] ; then
  CPP=
fi

#### Usage messages.

short_usage="Usage: ${progname} CONFIGURATION [-OPTION[=VALUE] ...]

Set compilation and installation parameters for Lucid Emacs, and report.
CONFIGURATION specifies the machine and operating system to build for.
--x-includes=DIR 	Search for X header files in DIR.
--x-libraries=DIR	Search for X libraries in DIR.
--site-includes=DIR	Other header file directories.
--site-libraries=DIR	Other library directories.
--with-motif		Use the Motif toolkit.
--with-openlook		Use the OpenLook toolkit.
--with-lucid		Use the Lucid widgets.
--with-tooltalk		Support the ToolTalk system.
--with-sparcworks	Support the Sun Sparcworks system.
--with-energize		Support the Lucid Energize system.
--compiler		Specify compiler.  Overrides with-gcc and with-lcc.
--dynamic		Link dynamically if supported by system.
--with-gcc		Use GCC to compile Emacs.
--with-lcc		Use LCC to compile Emacs.
--with-gcc=no		Don't use GCC to compile Emacs.
--with-xpm		Compile with support for XPM files.
--with-extensions	Compile with lwlib extensions (requires Xt source).
--external-widget	Compile with external widget support.
--with-sound=native	Compile with native sound support.
--with-sound=netaudio	Compile with netaudio sound support.
--with-sound=both	Compile with native and netaudio sound support.
--with-epoch		Compile with additional Epoch compatibility.
--const-is-losing=no	Allow the use of const in the source code.
--dont-have-xmu		For those unfortunates whose vendors don't ship Xmu
--rel-alloc		Override setting given in configuration files.
--srcdir=DIR		Look for the Emacs source files in DIR.
--prefix=DIR		Install files below DIR. Defaults to \`${prefix}'.
--cflags=FLAGS		Override the default values for CFLAGS.

You may also specify any of the \`path' variables found in
Makefile.in, including --bindir, --libdir, --lispdir, --datadir, and
so on.  Note that we recommend against explicitly setting any of these
variables.  See the INSTALL file for a complete list plus the reasons
we advise not changing them.

If successful, ${progname} leaves its status in config.status.  If
unsuccessful after disturbing the status quo, it removes config.status."


#### Option processing.

### Record all the arguments, so we can save them in config.status.
arguments="$@"

### Shell Magic: Quote the quoted arguments in ARGUMENTS.  At a later date,
### in order to get the arguments back in $@, we have to do an
###  `eval set x "$quoted_arguments"; shift'.
quoted_arguments=
for i in "$@"; do
   quoted_arguments="$quoted_arguments '$i'"
done

### Don't use shift -- that destroys the argument list, which autoconf needs
### to produce config.status.  It turns out that "set - ${arguments}" doesn't
### work portably.
### However, it also turns out that many shells cannot expand ${10} at all.
### So using an index variable doesn't work either.  It is possible to use
### some shell magic to make 'set x "$arguments"; shift' work portably.
while [ $# != 0 ]; do
  arg="$1"; shift
  case "${arg}" in

    ## Anything starting with a hyphen we assume is an option.
    -* )
      ## Separate the switch name from the value it's being given.
      case "${arg}" in
        -*=*)
	  opt=`echo ${arg} | sed 's:^-*\([^=]*\)=.*$:\1:'`
	  val=`echo ${arg} | sed 's:^-*[^=]*=\(.*\)$:\1:'`
	  valomitted=no
	;;
        -*)
          ## If FOO is a boolean argument, --FOO is equivalent to
          ## --FOO=yes.  Otherwise, the value comes from the next
          ## argument - see below.
	  opt=`echo ${arg} | sed 's:^-*\(.*\)$:\1:'`
          val="yes"
          valomitted=yes
        ;;
      esac

      ## Change `-' in the option name to `_'.
      optname="${opt}"
      opt="`echo ${opt} | tr - _`"

      ## Process the option.
      case "${opt}" in

        ## Has the user specified which window systems they want to support?
#        "with_x" | "with_x11" )
#	  ## Make sure the value given was either "yes" or "no".
#	  case "${val}" in
#	    y | ye | yes )	val=yes ;;
#	    n | no )		val=no  ;;
#	    * )
#	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
#Set it to either \`yes' or \`no'."
#	       echo "${short_usage}") >&2
#	      exit 1
#	    ;;
#	  esac
#          eval "${opt}=\"${val}\""
#        ;;

	## Has the user specified whether or not they want GCC or LCC?
	"with_gcc" | "with_lcc" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
	  if [ "${with_gcc}" = "yes" ] && [ "${with_lcc}" = "yes" ] ; then
	    (echo "${progname}: only one of --with-gcc and --with-lcc may be specified."
	     echo "${short_usage}") >&2
	    exit 1
	  fi
        ;;

        ## Has the user specified a compiler to use?
	"compiler" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=FOO'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
	    val="$1"; shift
	  fi
          compiler="${val}"
	;;

        ## Has the user specified a source directory?
	"srcdir" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=FOO'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
	    val="$1"; shift
	  fi
          srcdir="${val}"
	;;

        ## Has the user requested sound support?
	"with_sound" )
	  ## value can be native, netaudio or both. yes is allowed 
	  ## as a backwards compatible synonym for native
	  case "${val}" in
	    y | ye | yes )			val=native ;;
	    n | no | non | none )		val=no;;
	    na | nat | nati | nativ | native )	val=native  ;;
	    ne | net | neta | netau | netaud | netaudi | netaudio )	val=netaudio  ;;
	    b | bo | bot | both )		val=both;;
	    * )
	      (echo "${progname}: the \`--${optname}' option should have one of the values \`native', \`netaudio', \`both', or \`none'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested extra Epoch compatibility?
	"with_epoch" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user specified a change to the default linking?
	"dynamic" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested XPM support?
	"with_xpm" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested lwlib extensions?  (This is necessary to
	## get dialog boxes working properly, but requires the Xt source.
	## This is not a perfect solution.)
	"with_extensions" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested that assertions be used?
	"use_assertions" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested external widget support?
	"external_widget" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user requested that const be used?
	"const_is_losing" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user mentioned that they don't have Xmu?
	"dont_have_xmu" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

        ## Has the user specified explicit instructions for rel_alloc?
	"rel_alloc" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

	## Has the user tried to tell us where the X files are?
	## I think these are dopey, but no less than three alpha
	## testers, at large sites, have said they have their X files
	## installed in odd places.
	"x_includes" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=/usr/local/X11/include'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
            val="$1"; shift
	  fi
	  x_includes="${val}"
        ;;
	"x_libraries" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=/usr/local/X11/lib'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
            val="$1"; shift
	  fi
	  x_libraries="${val}"
        ;;

	"site_includes" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=/usr/local/X11/include'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
            val="$1"; shift
	  fi
	  site_includes="${val}"
        ;;
	"site_libraries" )
	  ## If the value was omitted, get it from the next argument.
	  if [ "${valomitted}" = "yes" ]; then
	    ## Get the next argument from the argument list, if there is one.
            if [ $# = 0 ]; then
	      (echo "${progname}: You must give a value for the \`--${optname}' option, as in
    \`--${optname}=/usr/local/X11/lib'."
	       echo "${short_usage}") >&2
	      exit 1
	    fi
            val="$1"; shift
	  fi
	  site_libraries="${val}"
        ;;

	## Has the user specified one of the path options?
	prefix | exec_prefix | bindir | datadir | statedir | libdir | \
	mandir | infodir | lispdir | etcdir | lockdir | archlibdir | \
	sitelispdir )
	   ## If the value was omitted, get it from the next argument.
	   if [ "${valomitted}" = "yes" ]; then
	      if [ $# = 0 ]; then
		 (echo \
"$progname: You must give a value for the \`--${optname}' option,";
		  echo \
"as in \`--${optname}=`eval echo '$'$optname`.'"
		  echo "$short_usage") >&2
		 exit 1
	      fi
	      val="$1"; shift
	   fi
	   eval "${opt}=\"${val}\""
	;;

	## Has the user specified values to override CFLAGS?
	cflags )
	   ## If the value was omitted, get it from the next argument.
	   if [ "${valomitted}" = "yes" ]; then
	      if [ $# = 0 ]; then
		 (echo \
"$progname: You must give a value for the \`--${optname}' option,";
		  echo \
"as in \`--${optname}=`eval echo '$'$optname`-g -O'"
		  echo "$short_usage") >&2
		 exit 1
	      fi
	      val="$1"; shift
	   fi
	   eval "${opt}=\"${val}\""
	;;

	## Verbose flag, tested by autoconf macros.
	"verbose" )
	  verbose=yes
	;;

	## Has the user asked for some help?
	"usage" | "help" )
	  if [ "x$PAGER" = x ]
	  then
	    echo "${short_usage}" | more
	  else
	    echo "${short_usage}" | $PAGER
	  fi
	  exit
	;;

	## Has the user specified whether they want a toolkit?
	"with_motif" | "with_openlook" | "with_lucid" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
	  if [ "${with_motif}" = "yes" ] && [ "${with_openlook}" = "yes" ] ; then
	    (echo "${progname}: only one of --with-motif and --with-openlook may be specified."
	     echo "${short_usage}") >&2
	    exit 1
	  fi
        ;;

	## Has the user specified whether or not they want to use ToolTalk?
	"with_tooltalk" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

	## Has the user specified whether or not they want to use SparcWorks?
	"with_sparcworks" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
	  if [ "${with_sparcworks}" = "yes" ]; then
            with_tooltalk='yes'
	  fi
        ;;

	## Has the user specified to create a runnable temacs?
	"runnable_temacs" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

	## Does the user want usage tracking?
	"usage_tracking" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
        ;;

	## Has the user specified whether or not they want to use Energize?
	"with_energize" )
	  ## Make sure the value given was either "yes" or "no".
	  case "${val}" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    * )
	      (echo "${progname}: the \`--${optname}' option is supposed to have a boolean value.
Set it to either \`yes' or \`no'."
	       echo "${short_usage}") >&2
	      exit 1
	    ;;
	  esac
          eval "${opt}=\"${val}\""
	  if [ "${with_energize}" = "yes" ]; then
	    with_motif='yes'
	    with_lucid='yes'
	    with_extensions='yes'
	    with_tooltalk='yes'
	    internal_makefile_list="$internal_makefile_list lwlib/energize/Makefile.in"
	  fi
        ;;

        ## We ignore all other options silently.
      esac
    ;;

    ## Anything not starting with a hyphen we assume is a
    ## configuration name.
    *)
      configuration=${arg}
    ;;

  esac
done

### Get the arguments back.  See the diatribe on Shell Magic above.
eval set x "$quoted_arguments"; shift

if [ "${configuration}" = "" ]; then
  echo '- You did not tell me what kind of host system you want to configure.
- I will attempt to guess the kind of system this is.' 1>&2
  guesssys=`echo ${progname} | sed 's/configure$/config.guess/'`
  if configuration=`${guesssys}` ; then
    echo "- Looks like this is a ${configuration}" 1>&2
  else
    echo '- Failed to guess the system type.  You need to tell me.' 1>&2
    echo "${short_usage}" >&2
    exit 1
  fi
fi

#### Decide where the source is.
case "${srcdir}" in

  ## If it's not specified, see if  `.' or `..' might work.
  "" )
    confdir=`echo $0 | sed 's|//|/|' | sed 's|/[^/]*$||'`
    if [ -f $confdir/src/lisp.h -a -f $confdir/lisp/version.el ]; then
      srcdir="${confdir}"
    else
      if [ -f "./src/lisp.h" -a -f "./lisp/version.el" ]; then
        srcdir='.'
      else
        if [ -f "../src/lisp.h" -a -f "../lisp/version.el" ]; then
	  srcdir='..'
        else
	  (echo "\
${progname}: Neither the current directory nor its parent seem to
contain the Emacs sources.  If you do not want to build Emacs in its
source tree, you should run \`${progname}' in the directory in which
you wish to build Emacs, using its \`--srcdir' option to say where the
sources may be found."
	    echo "${short_usage}") >&2
	  exit 1
        fi
      fi
    fi
  ;;

  ## Otherwise, check if the directory they specified is okay.
  * )
    if [ ! -d "${srcdir}" -o ! -f "${srcdir}/src/lisp.h" -o ! -f "${srcdir}/lisp/version.el" ]; then
      (echo "\
${progname}: The directory specified with the \`--srcdir' option,
\`${srcdir}', doesn't seem to contain the Emacs sources.  You should
either run the \`${progname}' script at the top of the Emacs source
tree, or use the \`--srcdir' option to specify where the Emacs sources
are."
       echo "${short_usage}") >&2
      exit 1
    fi
  ;;
esac

#### Make srcdir absolute, if it isn't already.  It's important to
#### avoid running the path through pwd unnecessary, since pwd can
#### give you automounter prefixes, which can go away.
case "${srcdir}" in
  /* ) ;;
  . )
    ## We may be able to use the $PWD environment variable to make this
    ## absolute.  But sometimes PWD is inaccurate.
    if [ "${PWD}" != "" ] && [ "`(cd ${PWD} ; sh -c pwd)`" = "`pwd`" ] ; then
      srcdir="$PWD"
    else
      srcdir="`(cd ${srcdir}; pwd)`"
    fi
  ;;
  *  ) srcdir="`(cd ${srcdir}; pwd)`" ;;
esac

#### Check if the source directory already has a configured system in it.
if [ `pwd` != `(cd ${srcdir} && pwd)` ] \
   && [ -f "${srcdir}/src/config.h" ] ; then
  (echo "${progname}: WARNING: The directory tree \`${srcdir}' is being used"
   echo "   as a build directory right now; it has been configured in its own"
   echo "   right.  To configure in another directory as well, you MUST"
   echo "   use GNU make.  If you do not have GNU make, then you must"
   echo "   now do \`make distclean' in ${srcdir},"
   echo "   and then run ${progname} again.") >&2
  extrasub='/^VPATH[	 ]*=/c\
vpath %.c $(srcdir)\
vpath %.h $(srcdir)\
vpath %.y $(srcdir)\
vpath %.l $(srcdir)\
vpath %.s $(srcdir)\
vpath %.in $(srcdir)'
fi

### Make the necessary directories, if they don't exist.
for dir in ./src ./lib-src ./lwlib ; do
  if [ ! -d ${dir} ]; then
    mkdir ${dir}
  fi
done
if [ "${with_energize}" = "yes" ] && [ ! -d ./lwlib/energize ] ; then
  mkdir ./lwlib/energize
fi

#### Given the configuration name, set machfile and opsysfile to the
#### names of the m/*.h and s/*.h files we should use.

### Canonicalize the configuration name.
echo "Checking the configuration name."
# allow -energize prefix on configuration name
internal_configuration=`echo ${configuration} | sed 's/-energize//'`
if canonical=`${srcdir}/config.sub "${internal_configuration}"` ; then : ; else
  exit $?
fi

### If you add support for a new configuration, add code to this
### switch statement to recognize your configuration name and select
### the appropriate operating system and machine description files.

### You would hope that you could choose an m/*.h file pretty much
### based on the machine portion of the configuration name, and an s-
### file based on the operating system portion.  However, it turns out
### that each m/*.h file is pretty manufacturer-specific - for
### example, apollo.h, hp9000s300.h, mega68k, news.h, and tad68k are
### all 68000 machines; mips.h, pmax.h, and news-risc are all MIPS
### machines.  So we basically have to have a special case for each
### configuration name.
###
### As far as handling version numbers on operating systems is
### concerned, make sure things will fail in a fixable way.  If
### /etc/MACHINES doesn't say anything about version numbers, be
### prepared to handle anything reasonably.  If version numbers
### matter, be sure /etc/MACHINES says something about it.
###
### Eric Raymond says we should accept strings like "sysvr4" to mean
### "System V Release 4"; he writes, "The old convention encouraged
### confusion between `system' and `release' levels'."

machine='' opsys='' unported='false'
case "${canonical}" in

  ## Alliant machines
  ## Strictly speaking, we need the version of the alliant operating
  ## system to choose the right machine file, but currently the
  ## configuration name doesn't tell us enough to choose the right
  ## one; we need to give alliants their own operating system name to
  ## do this right.  When someone cares, they can help us.
  fx80-alliant-* )
    machine=alliant4 opsys=bsd4-2
  ;;
  i860-alliant-* )
    machine=alliant-2800 opsys=bsd4-3
  ;;

  ## Altos 3068
  m68*-altos-sysv* )
    machine=altos opsys=usg5-2
  ;;
    
  ## Amdahl UTS
  580-amdahl-sysv* )
    machine=amdahl opsys=usg5-2-2
  ;;

  ## Appallings - I mean, Apollos - running Domain
  m68*-apollo* )
    machine=apollo opsys=bsd4-2
  ;;

  ## AT&T 3b2, 3b5, 3b15, 3b20
  we32k-att-sysv* )
    machine=att3b opsys=usg5-2-2
  ;;

  ## AT&T 3b1 - The Mighty Unix PC!
  m68*-att-sysv* )
    machine=7300 opsys=usg5-2-2
  ;;

  ## Bull dpx20
  rs6000-bull-bosx* )
    machine=ibmrs6000 opsys=aix3-2
  ;;

  ## Bull dpx2
  m68*-bull-sysv3* )
    machine=dpx2 opsys=usg5-3
  ;;

  ## Bull sps7
  m68*-bull-sysv2* )
    machine=sps7 opsys=usg5-2
  ;;

  ## CCI 5/32, 6/32 -- see "Tahoe".

  ## Celerity
  ## I don't know what configuration name to use for this; config.sub
  ## doesn't seem to know anything about it.  Hey, Celerity users, get
  ## in touch with us!
  celerity-celerity-bsd* )
    machine=celerity opsys=bsd4-2
  ;;

  ## Clipper
  ## What operating systems does this chip run that Emacs has been
  ## tested on?
  clipper-* )
    machine=clipper
    ## We'll use the catch-all code at the bottom to guess the
    ## operating system.
  ;;

  ## Convex
  *-convex-bsd* )
    machine=convex opsys=bsd4-3
  ;;

  ## Cubix QBx/386
  i386-cubix-sysv* )
    machine=intel386 opsys=usg5-3
  ;;

  ## Cydra 5
  cydra*-cydrome-sysv* )
    machine=cydra5 opsys=usg5-3
  ;;

  ## Data General AViiON Machines
  m88k-dg-dgux* )
    machine=aviion opsys=dgux
  ;;

  ## DECstations
  alpha-dec-osf1.3 | alpha-dec-osf2* )
    machine=alpha opsys=decosf1-3
  ;;
  alpha-dec-osf1.2 | alpha-dec-osf1* )
    machine=alpha opsys=decosf1-2
  ;;
  mips-dec-ultrix[0-3].* | mips-dec-ultrix4.0* | mips-dec-bsd4.2* )
    machine=pmax opsys=bsd4-2
  ;;
  mips-dec-ultrix* | mips-dec-bsd* )
    machine=pmax opsys=bsd4-3
  ;;
  mips-dec-osf* )
    machine=pmax opsys=osf1
  ;;
  mips-dec-mach* )
    machine=pmax opsys=mach
  ;;

  ## Motorola Delta machines
  m68*-motorola-sysv* | m68000-motorola-sysv* )
    machine=delta opsys=usg5-3
  ;;
  m88k-motorola-sysv4* )
    machine=delta88k opsys=usg5-4
  ;;
  m88k-motorola-sysv* | m88k-motorola-m88kbcs* )
    machine=delta88k opsys=usg5-3
  ;;

  ## Dual machines
  m68*-dual-sysv* )
    machine=dual opsys=usg5-2
  ;;
  m68*-dual-uniplus* )
    machine=dual opsys=unipl5-2
  ;;

  ## Elxsi 6400
  elxsi-elxsi-sysv* )
    machine=elxsi opsys=usg5-2
  ;;

  ## Encore machines
  ns16k-encore-bsd* )
    machine=ns16000 opsys=umax
  ;;

  ## The GEC 93 - apparently, this port isn't really finished yet.

  ## Gould Power Node and NP1
  pn-gould-bsd4.2* )
    machine=gould opsys=bsd4-2
  ;;
  pn-gould-bsd4.3* )
    machine=gould opsys=bsd4-3
  ;;
  np1-gould-bsd* )
    machine=gould-np1 opsys=bsd4-3
  ;;

  ## Harris Night Hawk machines running CX/UX (a 5000 looks just like a 4000
  ## as far as Emacs is concerned).
  m88k-harris-cxux* )
    # Build needs to be different on 7.0 and later releases
    case "`uname -r`" in
       [56].[0-9] ) machine=nh4000 opsys=cxux ;;
       [7].[0-9] ) machine=nh4000 opsys=cxux7 ;;
    esac
  ;;
  ## Harris ecx or gcx running CX/UX (Series 1200, Series 3000)
  m68k-harris-cxux* )
    machine=nh3000 opsys=cxux
  ;;

  ## Honeywell XPS100
  xps*-honeywell-sysv* )
    machine=xps100 opsys=usg5-2
  ;;

  ## HP 9000 series 200 or 300
  m68*-hp-bsd* )
    machine=hp9000s300 opsys=bsd4-3
  ;;
  m68*-hp-netbsd* )
    machine=hp9000s300 opsys=netbsd
  ;;
  ## HP/UX 7, 8 and 9 are supported on these machines.
  m68*-hp-hpux* )
    NON_GNU_CPP="cc -Aa -E"
    NON_GNU_CC="cc -Aa"
    case "`uname -r`" in
      ## Someone's system reports A.B8.05 for this.
      ## I wonder what other possibilities there are.
      *.B8.* ) machine=hp9000s300 opsys=hpux8 ;;
      *.08.* ) machine=hp9000s300 opsys=hpux8 ;;
      *.09.* ) machine=hp9000s300 opsys=hpux9 ;;
      *) machine=hp9000s300 opsys=hpux ;;
    esac
  ;;

  ## HP 9000 series 700 and 800, running HP/UX
  hppa*-hp-hpux7* )
    machine=hp9000s800 opsys=hpux NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
  ;;
  hppa*-hp-hpux8* )
    machine=hp9000s800 opsys=hpux8 NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
  ;;
  hppa*-hp-hpux8shr )
    machine=hp9000s800 opsys=hpux8shr NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
  ;;
  hppa*-hp-hpux9* )
    machine=hp9000s800 opsys=hpux9 NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
  ;;
  hppa*-hp-hpux9shr )
    machine=hp9000s800 opsys=hpux9shr NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
  ;;

  ## HP 9000 series 700 and 800, running HP/UX
  hppa*-hp-hpux* )
    NON_GNU_CPP="cc -Aa -E" NON_GNU_CC="cc -Aa"
    ## Cross-compilation?  Nah!
    case "`uname -r`" in
      ## Someone's system reports A.B8.05 for this.
      ## I wonder what other possibilities there are.
      *.B8.* ) machine=hp9000s800 opsys=hpux8 ;;
      *.08.* ) machine=hp9000s800 opsys=hpux8 ;;
      *.09.* ) machine=hp9000s800 opsys=hpux9 ;;
      *) machine=hp9000s800 opsys=hpux ;;
    esac
  ;;

  ## Orion machines
  orion-orion-bsd* )
    machine=orion opsys=bsd4-2
  ;;
  clipper-orion-bsd* )
    machine=orion105 opsys=bsd4-2
  ;;

  ## IBM machines
  i386-ibm-aix1.1* )
    machine=ibmps2-aix opsys=usg5-2-2
  ;;
  i386-ibm-aix1.[23]* | i386-ibm-aix* )
    machine=ibmps2-aix opsys=usg5-3
  ;;
  i370-ibm-aix*)
    machine=ibm370aix opsys=usg5-3
  ;;
  rs6000-ibm-aix3.1* )
    machine=ibmrs6000 opsys=aix3-1
  ;;
  rs6000-ibm-aix3.2* | rs6000-ibm-aix* )
    machine=ibmrs6000 opsys=aix3-2
  ;;
  romp-ibm-bsd4.3* )
    machine=ibmrt opsys=bsd4-3
  ;;	
  romp-ibm-bsd4.2* )
    machine=ibmrt opsys=bsd4-2
  ;;
  romp-ibm-aos4.3* )
    machine=ibmrt opsys=bsd4-3
  ;;	
  romp-ibm-aos4.2* )
    machine=ibmrt opsys=bsd4-2
  ;;
  romp-ibm-aos* )
    machine=ibmrt opsys=bsd4-3
  ;;
  romp-ibm-bsd* )
    machine=ibmrt opsys=bsd4-3
  ;;
  romp-ibm-aix* )
    machine=ibmrt-aix opsys=usg5-2-2
  ;;
  romp-ibm-mach* )
    machine=ibmrt opsys=mach
  ;;

  ## Integrated Solutions `Optimum V'
  m68*-isi-bsd4.2* )
    machine=isi-ov opsys=bsd4-2
  ;;
  m68*-isi-bsd4.3* )
    machine=isi-ov opsys=bsd4-3
  ;;

  ## Intel 386 machines where we do care about the manufacturer
  i[34]86-intsys-sysv* )
    machine=is386 opsys=usg5-2-2
  ;;

  ## Prime EXL
  i386-prime-sysv* )
    machine=i386 opsys=usg5-3
  ;;

  ## Sequent Symmetry
  i386-sequent-bsd* )
    machine=symmetry opsys=bsd4-3
  ;;

  ## Unspecified sysv on an ncr machine defaults to svr4.2.
  ## (Plain usg5-4 doesn't turn on POSIX signals, which we need.)
  i[34]86-ncr-sysv* )
    machine=intel386 opsys=usg5-4-2
  ;;

  ## Intel 860
  i860-*-sysv4* )
    machine=i860 opsys=usg5-4
  ;;

  ## Masscomp machines
  m68*-masscomp-rtu* )
    machine=masscomp opsys=rtu
  ;;

  ## Megatest machines
  m68*-megatest-bsd* )
    machine=mega68 opsys=bsd4-2
  ;;

  ## Workstations sold by MIPS
  ## This is not necessarily all workstations using the MIPS processor -
  ## Irises are produced by SGI, and DECstations by DEC.

  ## etc/MACHINES lists mips.h and mips4.h as possible machine files,
  ## and usg5-2-2 and bsd4-3 as possible OS files.  The only guidance
  ## it gives for choosing between the alternatives seems to be "Use
  ## -machine=mips4 for RISCOS version 4; use -opsystem=bsd4-3 with
  ## the BSD world."  I'll assume that these are instructions for
  ## handling two odd situations, and that every other situation
  ## should use mips.h and usg5-2-2, they being listed first.
  mips-mips-usg* )
    machine=mips4
    ## Fall through to the general code at the bottom to decide on the OS.
  ;;
  mips-mips-riscos4* )
    machine=mips4 opsys=bsd4-3
    NON_GNU_CC="cc -systype bsd43"
    NON_GNU_CPP="cc -systype bsd43 -E"
  ;;
  mips-mips-bsd* )
    machine=mips opsys=bsd4-3
  ;;
  mips-mips-* )
    machine=mips opsys=usg5-2-2
  ;;

  ## NeXT
  m68*-next-* )
    machine=next opsys=mach2
  ;;

  ## The complete machine from National Semiconductor
  ns32k-ns-genix* )
    machine=ns32000 opsys=usg5-2
  ;;

  ## NCR machines
  m68*-ncr-sysv2* | m68*-ncr-sysvr2* )
    machine=tower32 opsys=usg5-2-2
  ;;
  m68*-ncr-sysv3* | m68*-ncr-sysvr3* )
    machine=tower32v3 opsys=usg5-3
  ;;

  ## Nixdorf Targon 31
  m68*-nixdorf-sysv* )
    machine=targon31 opsys=usg5-2-2
  ;;

  ## Nu (TI or LMI)
  m68*-nu-sysv* )
    machine=nu opsys=usg5-2
  ;;

  ## Plexus
  m68*-plexus-sysv* )
    machine=plexus opsys=usg5-2
  ;;

  ## Pyramid machines
  ## I don't really have any idea what sort of processor the Pyramid has,
  ## so I'm assuming it is its own architecture.
  pyramid-pyramid-bsd* )
    machine=pyramid opsys=bsd4-2
  ;;

  ## Sequent Balance
  ns32k-sequent-bsd4.2* )
    machine=sequent opsys=bsd4-2
  ;;
  ns32k-sequent-bsd4.3* )
    machine=sequent opsys=bsd4-3
  ;;

  ## Siemens Nixdorf
  mips-siemens-sysv* )
    machine=mips-siemens opsys=usg5-4
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/bin/cc -E
  ;;

  ## Silicon Graphics machines
  ## Iris 2500 and Iris 2500 Turbo (aka the Iris 3030)
  m68*-sgi-iris3.5* )
    machine=irist opsys=iris3-5
  ;;
  m68*-sgi-iris3.6* | m68*-sgi-iris*)
    machine=irist opsys=iris3-6
  ;;
  ## Iris 4D
  mips-sgi-irix3.* )
    machine=iris4d opsys=irix3-3
  ;;
  mips-sgi-irix5.1 | mips-sgi-irix5.1.* | mips-sgi-irix5.2* )
    machine=iris4d opsys=irix5-1
  ;;
  mips-sgi-irix5.* | mips-sgi-irix5 )
    machine=iris4d opsys=irix5-0
  ;;
  mips-sgi-irix4.* | mips-sgi-irix* )
    machine=iris4d opsys=irix4-0
  ;;

  ## SONY machines
  m68*-sony-bsd4.2* )
    machine=news opsys=bsd4-2
  ;;
  m68*-sony-bsd4.3* )
    machine=news opsys=bsd4-3
  ;;
  m68*-sony-newsos3*)
    machine=news opsys=bsd4-3
  ;;
  mips-sony-bsd* )
    machine=news-risc opsys=bsd4-3
  ;;
  mips-sony-newsos* )
    machine=mips opsys=newsos5
  ;;

  ## Stride
  m68*-stride-sysv* )
    machine=stride opsys=usg5-2
  ;;

  ## Suns
  *-sun-sunos* | *-sun-bsd* | *-sun-solaris* | *-sun-mach* )
    case "${canonical}" in
      m68*-sunos1* )	machine=sun1 ;;
      m68*-sunos2* )	machine=sun2 ;;
      m68* )		machine=sun3 ;;
      i[34]86* )	machine=sun386 ;;
      sparc* )		machine=sparc ;;
      * )		unported=true ;;
    esac
    case "${canonical}" in
      ## The Sun386 didn't get past 4.0.
      i386-*-sunos4	  ) opsys=sunos4-0 ;;
      *-sunos4.0*	  ) opsys=sunos4-0 ;;
      *-sunos4.1.2*       ) opsys=sunos4-1-2 ;;
      *-sunos4.1.3*	  ) opsys=sunos4-1-3 ;;
      *-sunos4* | *-sunos ) opsys=sunos4-1 ;;
      *-sunos4-0shr*	  ) opsys=sunos4-0shr ;;
      *-sunos4-1shr*	  ) opsys=sunos4-1shr ;;
      *-sunos4-1-2shr*	  ) opsys=sunos4-1-2shr ;;
      *-sunos4-1-3shr*	  ) opsys=sunos4-1-3shr ;;
      *-sunos5* | *-solaris* )
	opsys=sol2
	NON_GNU_CPP=/usr/ccs/lib/cpp
	;;
      *-mach*		  ) opsys=mach ;;
      *			  ) opsys=bsd4-2 ;;
    esac
  ;;

  ## Tadpole 68k
  m68*-tadpole-sysv* )
    machine=tad68k opsys=usg5-3
  ;;

  ## Tahoe machines
  tahoe-tahoe-bsd4.2* )
    machine=tahoe opsys=bsd4-2
  ;;
  tahoe-tahoe-bsd4.3* )
    machine=tahoe opsys=bsd4-3
  ;;

  ## Tandem Integrity S2
  mips-tandem-sysv* )
    machine=tandem-s2 opsys=usg5-3
  ;;

  ## Tektronix XD88
  m88k-tektronix-sysv3* )
  machine=tekxd88 opsys=usg5-3
  ;;

  ## Tektronix 16000 box (6130?)
  ns16k-tektronix-bsd* )
    machine=ns16000 opsys=bsd4-2
  ;;
  ## Tektronix 4300
  ## src/m/tek4300.h hints that this is a m68k machine.
  m68*-tektronix-bsd* )
    machine=tek4300 opsys=bsd4-3
  ;;

  ## Titan P2 or P3
  ## We seem to have lost the machine-description file titan.h!
  titan-titan-sysv* )
    machine=titan opsys=usg5-3
  ;;
  
  ## Ustation E30 (SS5E)
  m68*-unisys-uniplus* )
    machine=ustation opsystem=unipl5-2
  ;;

  ## Vaxen.
  vax-dec-* )
    machine=vax
    case "${canonical}" in
      *-bsd4.1* ) 					opsys=bsd4-1 ;;
      *-bsd4.2* | *-ultrix[0-3].* | *-ultrix4.0* )	opsys=bsd4-2 ;;
      *-bsd4.3* | *-ultrix* ) 				opsys=bsd4-3 ;;
      *-bsd386* )					opsys=bsd386 ;;
      *-sysv[01]* | *-sysvr[01]* ) 			opsys=usg5-0 ;;
      *-sysv2* | *-sysvr2* )				opsys=usg5-2 ;;
      *-vms* ) 						opsys=vms ;;
      *-mach* )						opsys=mach ;;
      * ) 						unported=true
    esac
  ;;

  ## Whitechapel MG1
  ns16k-whitechapel-* )
    machine=mg1
    ## We don't know what sort of OS runs on these; we'll let the
    ## operating system guessing code below try.
  ;;

  ## Wicat
  m68*-wicat-sysv* )
    machine=wicat opsys=usg5-2
  ;;

  ## Intel 386 machines where we don't care about the manufacturer
  i[34]86-*-* )
    machine=intel386
    case "${canonical}" in
      *-isc1.* | *-isc2.[01]* )	opsys=386-ix ;;
      *-isc2.2* )		opsys=isc2-2 ;;
      *-isc4.0* )		opsys=isc4-0 ;;
      *-isc* )			opsys=isc3-0 ;;
      *-esix5* )		opsys=esix5r4; NON_GNU_CPP=/usr/lib/cpp ;;
      *-esix* )			opsys=esix ;;
      *-mach* )			opsys=mach ;;
      *-xenix* )		opsys=xenix ;;
      *-linux* )		opsys=linux ;;
      *-sco3.2v4* )		opsys=sco4 ;;
      *-bsd386* )		opsys=bsd386 ;;
      *-386bsd* )	        opsys=386bsd ;;
      *-freebsd* )		opsys=freebsd ;;
      *-netbsd* )	        opsys=netbsd ;;
      *-nextstep* )		opsys=mach2 ;;
      ## Otherwise, we'll fall through to the generic opsys code at the bottom.
    esac
  ;;

  * )
    unported=true
  ;;
esac

### If the code above didn't choose an operating system, just choose
### an operating system based on the configuration name.  You really
### only want to use this when you have no idea what the right
### operating system is; if you know what operating systems a machine
### runs, it's cleaner to make it explicit in the case statement
### above.
if [ x"${opsys}" = x ]; then
  case "${canonical}" in
    *-bsd4.[01] )	opsys=bsd4-1 ;;
    *-bsd4.2 )		opsys=bsd4-2 ;;
    *-bsd4.3 )		opsys=bsd4-3 ;;
    *-sysv0 | *-sysvr0 )		opsys=usg5-0 ;;
    *-sysv2 | *-sysvr2 )		opsys=usg5-2 ;;
    *-sysv2.2 | *-sysvr2.2 )		opsys=usg5-2-2 ;;
    *-sysv3 | *-sysvr3 )		opsys=usg5-3 ;;
    *-sysv4 | *-sysvr4 )		opsys=usg5-4 ;;
    *-sysv4.1 | *-sysvr4.1 )
      NON_GNU_CPP=/usr/lib/cpp
      opsys=usg5-4 ;;
    *-sysv4.2 | *-sysvr4.2 )		opsys=usg5-4-2 ;;
    * )
      unported=true
    ;;
  esac
fi

if $unported ; then
  (echo "${progname}: Emacs hasn't been ported to \`${canonical}' systems."
   echo "${progname}: Check \`etc/MACHINES' for recognized configuration names."
  ) >&2
  exit 1
fi

if [ "${dynamic}" = "yes" ]; then
  if [ "${with_extensions}" = "yes" ]; then
     echo "configure: warning: --dynamic not allowed in conjunction with --with-extensions" >&2 
    dynamic=no
  else
    case "${opsys}" in
      hpux8		) opsys=hpux8shr ;;
      hpux9		) opsys=hpux9shr ;;
      sunos4-0		) opsys=sunos4-0shr ;;
      sunos4-1		) opsys=sunos4-1shr ;;
      sunos4-1-2	) opsys=sunos4-1-2shr ;;
      sunos4-1-3	) opsys=sunos4-1-3shr ;;
    esac
  fi
elif [ "${dynamic}" = "no" ]; then
  case "${opsys}" in
    sol2	)	opsys=sol2-static ;;
  esac
fi

machfile="m/${machine}.h"
opsysfile="s/${opsys}.h"


ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='${CPP}'
ac_compile='${CC-cc} $CFLAGS $LDFLAGS conftest.${ac_ext} -o conftest $LIBS >/dev/null 2>&1'

trap 'rm -fr conftest* confdefs* core $ac_clean_files; exit 1' 1 2 15
trap 'rm -fr confdefs* $ac_clean_files' 0

# Save the original args if we used an alternate arg parser.
ac_configure_temp="${configure_args-$*}"
# Strip out --no-create and --norecursion so they don't pile up.
configure_args=
for ac_arg in $ac_configure_temp; do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -norecursion | --norecursion | --norecursio | --norecursi \
  | --norecurs | --norecur | --norecu | --norec | --nore | --nor) ;;
  *) configure_args="$configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# These must not be set unconditionally because not all systems understand
# e.g. LANG=C (notably SCO).
if test "${LC_ALL+set}" = 'set'; then LC_ALL=C; export LC_ALL; fi
if test "${LANG+set}"   = 'set'; then LANG=C;   export LANG;   fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=lisp

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then `..'.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test x$ac_srcdir_defaulted = xyes; then
    echo "configure: can not find sources in ${ac_confdir} or .." >&2; exit 1
  else
    echo "configure: can not find sources in ${srcdir}" >&2; exit 1
  fi
fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='${CPP}'
ac_compile='${CC-cc} $CFLAGS $LDFLAGS conftest.${ac_ext} -o conftest $LIBS >/dev/null 2>&1'





#### Choose a compiler.
if [ "x$CC" = x ] ; then
  cc_specified=1
fi

if [ "${compiler}" != "" ] ; then
  CC="${compiler}"
elif [ "${with_gcc}" = "yes" ] ; then
  CC="gcc"
  GCC=1
elif [ "${with_lcc}" = "yes" ] ; then
  CC="lcc"
  if [ "x$NON_GNU_CPP" = x ] ; then
    NON_GNU_CPP="yes"
  fi
elif [ "${with_gcc}" = "no" ] ; then
  CC="cc"
elif [ "${with_lcc}" = "no" ] ; then
  CC="cc"
else
  case "${canonical}" in
    * )
       if test -z "$CC"; then
  # Extract the first word of `gcc', so it can be a program name with args.
  set ac_dummy gcc; ac_word=$2
  test -n "$silent" || echo "checking for $ac_word"
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
test -z "$CC" && CC="cc"
test -n "$CC" && test -n "$verbose" && echo "	setting CC to $CC"

# Find out if we are using GNU C, under whatever name.
cat > conftest.c <<EOF
#ifdef __GNUC__
  yes
#endif
EOF
${CC-cc} -E conftest.c > conftest.out 2>&1
if egrep yes conftest.out >/dev/null 2>&1; then
  GCC=1 # For later tests.
fi
rm -f conftest*
 
      if [ "${CC}" = "gcc" ] ; then
        with_gcc="yes"
        GCC=1
      fi
    ;;
  esac
fi

#### Some systems specify a CPP to use unless we are using GCC.
#### Now that we know whether we are using GCC, we can decide whether
#### to use that one.
if [ "x$NON_GNU_CPP" = x ] || [ x$GCC = x1 ]
then true
else
  if [ "x$CPP" = x ]; then
    if [ "${with_lcc}" = "yes" ] && [ "${NON_GNU_CPP}" = "yes" ] ; then
      CPP="lcc -E -Xk"
    else
      CPP="$NON_GNU_CPP"
    fi
  fi
fi

#### Some systems specify a CC to use unless we are using GCC.
#### Now that we know whether we are using GCC, we can decide whether
#### to use that one.
if [ "x$NON_GNU_CC" = x ] || [ x$GCC = x1 ] || [ x$cc_specified = x1 ]
then true
else
  CC="$NON_GNU_CC"
fi

#### Some other nice autoconf tests.  If you add a test here which
#### should make an entry in src/config.h, don't forget to add an
#### #undef clause to src/config.h.in for autoconf to modify.

test -n "$silent" || echo "checking for ln -s"
rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  LN_S="ln -s"
else
  LN_S=ln
fi


test -n "$silent" || echo "checking how to run the C preprocessor"
if test -z "$CPP"; then
  # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and ``${CC-cc}'' will simply confuse
  # make.  It must be expanded now.
  CPP="${CC-cc} -E"
  cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <stdio.h>
Syntax Error
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  :
else
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <stdio.h>
Syntax Error
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  :
else
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
test -n "$verbose" && echo "	setting CPP to $CPP"


case "${canonical}" in
  *-sun-sunos* )
    if [ "${CPP}" = "acc -E" ] ; then
      CPP="acc -E -Xs"
    fi
  ;;
esac

cat > conftestmake <<'EOF'
all:
	@echo 'ac_maketemp="${MAKE}"'
EOF
# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
if test -n "$ac_maketemp"; then SET_MAKE=
else SET_MAKE="MAKE=${MAKE-make}"; fi
rm -f conftestmake

if test -z "$RANLIB"; then
  # Extract the first word of `ranlib', so it can be a program name with args.
  set ac_dummy ranlib; ac_word=$2
  test -n "$silent" || echo "checking for $ac_word"
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
test -z "$RANLIB" && RANLIB=":"
test -n "$RANLIB" && test -n "$verbose" && echo "	setting RANLIB to $RANLIB"

# Make sure to not get the incompatible SysV /etc/install and
# /usr/sbin/install, which might be in PATH before a BSD-like install,
# or the SunOS /usr/etc/install directory, or the AIX /bin/install,
# or the AFS install, which mishandles nonexistent args, or
# /usr/ucb/install on SVR4, which tries to use the nonexistent group
# `staff', or /sbin/install on IRIX which has incompatible command-line
# syntax.  Sigh.
#
#     On most BSDish systems install is in /usr/bin, not /usr/ucb
#     anyway.
# This turns out not to be true, so the mere pathname isn't an indication
# of whether the program works.  What we really need is a set of tests for
# the install program to see if it actually works in all the required ways.
#
# Avoid using ./install, which might have been erroneously created
# by make from ./install.sh.
if test -z "${INSTALL}"; then
  test -n "$silent" || echo "checking for a BSD compatible install"
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    case "$ac_dir" in
    ''|.|/etc|/sbin|/usr/sbin|/usr/etc|/usr/afsws/bin|/usr/ucb) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      for ac_prog in installbsd scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    # OSF/1 installbsd also uses dspmsg, but is usable.
	    :
	  else
	    INSTALL="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_ifs"
fi

if test -z "$INSTALL"; then
  # As a last resort, use the slow shell script.
  for ac_dir in ${srcdir} ${srcdir}/.. ${srcdir}/../..; do
    if test -f $ac_dir/install.sh; then
      INSTALL="$ac_dir/install.sh -c"; break
    fi
  done
fi
if test -z "$INSTALL"; then
  echo "configure: can not find install.sh in ${srcdir} or ${srcdir}/.. or ${srcdir}/../.." >&2; exit 1
fi
test -n "$verbose" && echo "	setting INSTALL to $INSTALL"

# Use test -z because SunOS4 sh mishandles ${INSTALL_PROGRAM-'${INSTALL}'}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
test -n "$verbose" && echo "	setting INSTALL_PROGRAM to $INSTALL_PROGRAM"

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
test -n "$verbose" && echo "	setting INSTALL_DATA to $INSTALL_DATA"

for ac_prog in 'bison -y' byacc
do
if test -z "$YACC"; then
  # Extract the first word of `$ac_prog', so it can be a program name with args.
  set ac_dummy $ac_prog; ac_word=$2
  test -n "$silent" || echo "checking for $ac_word"
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi

test -n "$YACC" && test -n "$verbose" && echo "	setting YACC to $YACC"

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"



for ac_hdr in mach/mach.h sys/time.h unistd.h utime.h
do
ac_tr_hdr=HAVE_`echo $ac_hdr | tr '[a-z]./' '[A-Z]__'`
test -n "$silent" || echo "checking for ${ac_hdr}"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <${ac_hdr}>
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining ${ac_tr_hdr}"
echo "#define" ${ac_tr_hdr} "1" >> confdefs.h
DEFS="$DEFS -D${ac_tr_hdr}=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}${ac_tr_hdr}\${ac_dB}${ac_tr_hdr}\${ac_dC}1\${ac_dD}
\${ac_uA}${ac_tr_hdr}\${ac_uB}${ac_tr_hdr}\${ac_uC}1\${ac_uD}
\${ac_eA}${ac_tr_hdr}\${ac_eB}${ac_tr_hdr}\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*
done

test -n "$silent" || echo "checking for ANSI C header files"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  rm -rf conftest*
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
echo '#include "confdefs.h"
#include <string.h>' > conftest.${ac_ext}
eval "$ac_cpp conftest.${ac_ext} > conftest.out 2>&1"
if egrep "memchr" conftest.out >/dev/null 2>&1; then
  rm -rf conftest*
  # SGI's /bin/cc from Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e,f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
eval $ac_compile
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
echo '#include "confdefs.h"
#include <stdlib.h>' > conftest.${ac_ext}
eval "$ac_cpp conftest.${ac_ext} > conftest.out 2>&1"
if egrep "free" conftest.out >/dev/null 2>&1; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining STDC_HEADERS"
echo "#define" STDC_HEADERS "1" >> confdefs.h
DEFS="$DEFS -DSTDC_HEADERS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}STDC_HEADERS\${ac_dB}STDC_HEADERS\${ac_dC}1\${ac_dD}
\${ac_uA}STDC_HEADERS\${ac_uB}STDC_HEADERS\${ac_uC}1\${ac_uD}
\${ac_eA}STDC_HEADERS\${ac_eB}STDC_HEADERS\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*


fi
rm -fr conftest*

fi
rm -f conftest*


fi
rm -f conftest*

test -n "$silent" || echo "checking for whether time.h and sys/time.h may both be included"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() { return 0; }
int t() { struct tm *tp;; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining TIME_WITH_SYS_TIME"
echo "#define" TIME_WITH_SYS_TIME "1" >> confdefs.h
DEFS="$DEFS -DTIME_WITH_SYS_TIME=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}TIME_WITH_SYS_TIME\${ac_dB}TIME_WITH_SYS_TIME\${ac_dC}1\${ac_dD}
\${ac_uA}TIME_WITH_SYS_TIME\${ac_uB}TIME_WITH_SYS_TIME\${ac_uC}1\${ac_uD}
\${ac_eA}TIME_WITH_SYS_TIME\${ac_eB}TIME_WITH_SYS_TIME\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*

test -n "$silent" || echo "checking for sys_siglist declaration in signal.h or unistd.h"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <signal.h>
/* NetBSD declares sys_siglist in <unistd.h>.  */
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
int main() { return 0; }
int t() { char *msg = *(sys_siglist + 1);; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining SYS_SIGLIST_DECLARED"
echo "#define" SYS_SIGLIST_DECLARED "1" >> confdefs.h
DEFS="$DEFS -DSYS_SIGLIST_DECLARED=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}SYS_SIGLIST_DECLARED\${ac_dB}SYS_SIGLIST_DECLARED\${ac_dC}1\${ac_dD}
\${ac_uA}SYS_SIGLIST_DECLARED\${ac_uB}SYS_SIGLIST_DECLARED\${ac_uC}1\${ac_uD}
\${ac_eA}SYS_SIGLIST_DECLARED\${ac_eB}SYS_SIGLIST_DECLARED\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*


test -n "$silent" || echo "checking for return type of signal handlers"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
extern void (*signal ()) ();
int main() { return 0; }
int t() { int i;; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining" RETSIGTYPE to be "void"
echo "#define" RETSIGTYPE "void" >> confdefs.h
DEFS="$DEFS -DRETSIGTYPE=void"
ac_sed_defs="${ac_sed_defs}\${ac_dA}RETSIGTYPE\${ac_dB}RETSIGTYPE\${ac_dC}void\${ac_dD}
\${ac_uA}RETSIGTYPE\${ac_uB}RETSIGTYPE\${ac_uC}void\${ac_uD}
\${ac_eA}RETSIGTYPE\${ac_eB}RETSIGTYPE\${ac_eC}void\${ac_eD}
"
}


else
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining" RETSIGTYPE to be "int"
echo "#define" RETSIGTYPE "int" >> confdefs.h
DEFS="$DEFS -DRETSIGTYPE=int"
ac_sed_defs="${ac_sed_defs}\${ac_dA}RETSIGTYPE\${ac_dB}RETSIGTYPE\${ac_dC}int\${ac_dD}
\${ac_uA}RETSIGTYPE\${ac_uB}RETSIGTYPE\${ac_uC}int\${ac_uD}
\${ac_eA}RETSIGTYPE\${ac_eB}RETSIGTYPE\${ac_eC}int\${ac_eD}
"
}

fi
rm -f conftest*



test -n "$silent" || echo "checking for struct tm in time.h"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() { return 0; }
int t() { struct tm *tp; tp->tm_sec;; return 0; }
EOF
if eval $ac_compile; then
  :
else
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining TM_IN_SYS_TIME"
echo "#define" TM_IN_SYS_TIME "1" >> confdefs.h
DEFS="$DEFS -DTM_IN_SYS_TIME=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}TM_IN_SYS_TIME\${ac_dB}TM_IN_SYS_TIME\${ac_dC}1\${ac_dD}
\${ac_uA}TM_IN_SYS_TIME\${ac_uB}TM_IN_SYS_TIME\${ac_uC}1\${ac_uD}
\${ac_eA}TM_IN_SYS_TIME\${ac_eB}TM_IN_SYS_TIME\${ac_eC}1\${ac_eD}
"
}

fi
rm -f conftest*

ac_decl='#include <sys/types.h>
'
case "$DEFS" in
  *TM_IN_SYS_TIME*) ac_decl="$ac_decl
#include <sys/time.h>
" ;;
  *) ac_decl="$ac_decl
#include <time.h>
" ;;
esac
test -n "$silent" || echo "checking for tm_zone in struct tm"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
$ac_decl
int main() { return 0; }
int t() { struct tm tm; tm.tm_zone;; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining HAVE_TM_ZONE"
echo "#define" HAVE_TM_ZONE "1" >> confdefs.h
DEFS="$DEFS -DHAVE_TM_ZONE=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_TM_ZONE\${ac_dB}HAVE_TM_ZONE\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_TM_ZONE\${ac_uB}HAVE_TM_ZONE\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_TM_ZONE\${ac_eB}HAVE_TM_ZONE\${ac_eC}1\${ac_eD}
"
}


else
  rm -rf conftest*
  ac_no_tm_zone=1
fi
rm -f conftest*

if test -n "$ac_no_tm_zone"; then
test -n "$silent" || echo "checking for tzname"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others want it this way.  */
#endif
int main() { return 0; }
int t() { atoi(*tzname);; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  
{
test -n "$verbose" && \
echo "	defining HAVE_TZNAME"
echo "#define" HAVE_TZNAME "1" >> confdefs.h
DEFS="$DEFS -DHAVE_TZNAME=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_TZNAME\${ac_dB}HAVE_TZNAME\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_TZNAME\${ac_uB}HAVE_TZNAME\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_TZNAME\${ac_eB}HAVE_TZNAME\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*

fi


test -n "$silent" || echo "checking byte ordering"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
eval $ac_compile
if test -s conftest && (./conftest; exit) 2>/dev/null; then
  :
else
  
{
test -n "$verbose" && \
echo "	defining WORDS_BIGENDIAN"
echo "#define" WORDS_BIGENDIAN "1" >> confdefs.h
DEFS="$DEFS -DWORDS_BIGENDIAN=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}WORDS_BIGENDIAN\${ac_dB}WORDS_BIGENDIAN\${ac_dC}1\${ac_dD}
\${ac_uA}WORDS_BIGENDIAN\${ac_uB}WORDS_BIGENDIAN\${ac_uC}1\${ac_uD}
\${ac_eA}WORDS_BIGENDIAN\${ac_eB}WORDS_BIGENDIAN\${ac_eC}1\${ac_eD}
"
}

fi
rm -fr conftest*




#### Choose a window system.
echo "Checking window system."

window_system=''
case "${with_x}" in
  yes )
    window_system=${window_system}x11
  ;;
  no )
    window_system=${window_system}none
esac
case "${with_x11}" in
  yes )
    window_system=${window_system}x11
  ;;
esac

case "${window_system}" in
  "none" | "x11" ) ;;
  "" )
    # --x-includes or --x-libraries implies --with-x11.
    if [ -n "${x_includes}" ] || [ -n "${x_libraries}" ]; then
      window_system=x11
    else
      echo "  No window system specified.  Looking for X11."
      # If the user didn't specify a window system and we found X11, use it.
      if [ -r /usr/lib/libX11.a \
	 -o -d /usr/include/X11 \
         -o -d /usr/X386/include \
	 -o -d ${x_includes}/X11 ]; then
        window_system=x11
      fi
    fi
  ;;
  * )
    echo "Don't specify a window system more than once." >&2
    exit 1
  ;;
esac

case "${window_system}" in
  "" | "x11" )
    ### If the user hasn't specified where we should find X, try
    ### letting autoconf figure that out.
    if [ -z "${x_includes}" ] && [ -z "${x_libraries}" ]; then
      
      # If we find X, set shell vars x_includes and x_libraries to the paths.
no_x=true
if test "x$with_x" != xno; then
test -n "$silent" || echo "checking for X include and library files with xmkmf"
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    no_x=
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `make acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    if test ! -f $ac_im_usrlibdir/libX11.a && test -f $ac_im_libdir/libX11.a
    then
      ac_im_usrlibdir=$ac_im_libdir
    fi
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -z "$x_includes" && x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -z "$x_libraries" && x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test -z "$ac_im_usrlibdir"; then
test -n "$silent" || echo "checking for X include and library files directly"
if test ".$x_direct_test_library" = . ; then
   x_direct_test_library='Xt'
fi
if test ".$x_direct_test_include" = . ; then
   x_direct_test_include='X11/Intrinsic.h'
fi
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  rm -rf conftest*
  no_x=

else
  rm -rf conftest*
  for ac_dir in               \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X11/include          \
    /usr/include/X11          \
    /usr/local/X11/include    \
    /usr/local/include/X11    \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      test -z "$x_includes" && x_includes=$ac_dir
      no_x=
      break
    fi
  done
fi
rm -f conftest*

# Check for the libraries.  First see if replacing the `include' by
# `lib' works.
ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -l"$x_direct_test_library""
ac_have_lib=""
test -n "$silent" || echo "checking for -l"$x_direct_test_library""
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; no_x=
else
   :; for ac_dir in `echo "$x_includes" | sed s/include/lib/` \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X11/lib          \
    /usr/lib/X11          \
    /usr/local/X11/lib    \
    /usr/local/lib/X11    \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      test -z "$x_libraries" && x_libraries=$ac_dir
      no_x=
      break 2
    fi
  done
done
fi

fi
test -n "$x_includes" && test -n "$verbose" && echo "	X11 headers are in $x_includes"
test -n "$x_libraries" && test -n "$verbose" && echo "	X11 libraries are in $x_libraries"
fi

      
    fi
    if [ -n "${x_includes}" ] || [ -n "${x_libraries}" ]; then
      window_system=x11
    fi
  ;;
esac

[ -z "${window_system}" ] && window_system=none

if [ "${window_system}" = "none" ]; then
  echo "This version of emacs only runs under X at the moment." >&2
  exit 1
fi

[ -n "${x_libraries}" ] && LD_SWITCH_X_SITE="-L${x_libraries}"
[ -n "${x_includes}" ] && C_SWITCH_X_SITE="-I${x_includes}"

if [ -n "${site_libraries}" ]; then
  for arg in ${site_libraries}
  do
    LD_SWITCH_SITE="${LD_SWITCH_SITE} -L${arg}"
    case "${canonical}" in
      *-sun-solaris* | *-sun-sunos5* )
        LD_SWITCH_SITE="${LD_SWITCH_SITE} -R${arg}"
      esac
  done
fi
if [ -n "${site_includes}" ]; then
  for arg in ${site_includes}
  do
    C_SWITCH_SITE="${C_SWITCH_SITE} -I${arg}"
  done
fi

# Avoid forcing the search of /usr/include before fixed include files.
if [ "$C_SWITCH_X_SITE" = "-I/usr/include" ]; then
   C_SWITCH_X_SITE=" "
fi

case "${window_system}" in
  x11 )
    HAVE_X_WINDOWS=yes
    echo "  Using X11."
  ;;
  none )
    HAVE_X_WINDOWS=no
    echo "  Using no window system."
  ;;
esac

#### Extract some information from the operating system and machine files.

echo "Examining the machine- and system-dependent files to find out"
echo " - which libraries the lib-src programs will want, and"
echo " - whether the GNU malloc routines are usable."

### It's not important that this name contain the PID; you can't run
### two configures in the same directory and have anything work
### anyway.
tempcname="conftest.c"

echo '
#define THIS_IS_YMAKEFILE
#include "'${srcdir}'/src/'${opsysfile}'"
#include "'${srcdir}'/src/'${machfile}'"
#ifndef LIBS_MACHINE
#define LIBS_MACHINE
#endif
#ifndef LIBS_SYSTEM
#define LIBS_SYSTEM
#endif
#ifndef C_SWITCH_SYSTEM
#define C_SWITCH_SYSTEM
#endif
#ifndef C_SWITCH_X_SYSTEM
#define C_SWITCH_X_SYSTEM
#endif
#ifndef C_SWITCH_MACHINE
#define C_SWITCH_MACHINE
#endif
#ifndef LD_SWITCH_X_SYSTEM
#define LD_SWITCH_X_SYSTEM
#endif
configure___ libsrc_libs=LIBS_MACHINE LIBS_SYSTEM
configure___ c_switch_system=C_SWITCH_SYSTEM
configure___ c_switch_x_system=C_SWITCH_X_SYSTEM
configure___ ld_switch_x_system=LD_SWITCH_X_SYSTEM
configure___ c_switch_machine=C_SWITCH_MACHINE

#ifndef LIB_X11_LIB
#define LIB_X11_LIB -lX11
#endif

#ifndef LIBX11_MACHINE
#define LIBX11_MACHINE
#endif

#ifndef LIBX11_SYSTEM
#define LIBX11_SYSTEM
#endif
configure___ LIBX=LIB_X11_LIB LIBX11_MACHINE LIBX11_SYSTEM

#ifdef UNEXEC
configure___ unexec=UNEXEC
#else
configure___ unexec=unexec.o
#endif

#ifdef SYSTEM_MALLOC
configure___ system_malloc=yes
#else
configure___ system_malloc=no
#endif

#ifndef C_DEBUG_SWITCH
#define C_DEBUG_SWITCH -g
#endif

#ifndef C_OPTIMIZE_SWITCH
#define C_OPTIMIZE_SWITCH -O
#endif

#ifdef __GNUC__
configure___ CFLAGS=C_DEBUG_SWITCH C_OPTIMIZE_SWITCH
#else
configure___ CFLAGS=C_DEBUG_SWITCH
#endif
' > ${tempcname}
# The value of CPP is a quoted variable reference, so we need to do this
# to get its actual value...
CPP=`eval "echo $CPP"`
eval `${CPP} -Isrc ${tempcname} \
       | grep 'configure___' \
       | sed -e 's/^configure___ \([^=]*=\)\(.*\)$/\1"\2"/'`
rm ${tempcname}

# override CFLAGS if user wishes
if [ x"${cflags}" != x ]; then
  CFLAGS=${cflags}
fi

### Compute the unexec source name from the object name.
UNEXEC_SRC="`echo ${unexec} | sed 's/\.o/.c/'`"

# Do the opsystem or machine files prohibit the use of the GNU malloc?
# Assume not, until told otherwise.
GNU_MALLOC=yes
if [ "${system_malloc}" = "yes" ]; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
  (The GNU allocators don't work with this system configuration.)"
fi

if [ "${rel_alloc}" = "yes" ]; then
  # REL_ALLOC requires GNU malloc
  if [ "${GNU_MALLOC}" = "yes" ]; then
    REL_ALLOC=yes
  fi
elif [ "${rel_alloc}" = "no" ]; then
  REL_ALLOC=no
fi

if [ x"${REL_ALLOC}" = x ]; then
  if [ x"${NO_REL_ALLOC}" = x ]; then
    REL_ALLOC=${GNU_MALLOC}
  fi
fi

LISP_FLOAT_TYPE=yes


#### Add the libraries to LIBS and check for some functions.


DEFS="${C_SWITCH_SITE} $c_switch_system $c_switch_machine $c_switch_x_system $DEFS"
LIBS="${LD_SWITCH_SITE} $ld_switch_x_system $libsrc_libs"

ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -ldnet"
ac_have_lib=""
test -n "$silent" || echo "checking for -ldnet"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_LIBDNET"
echo "#define" HAVE_LIBDNET "1" >> confdefs.h
DEFS="$DEFS -DHAVE_LIBDNET=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_LIBDNET\${ac_dB}HAVE_LIBDNET\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_LIBDNET\${ac_uB}HAVE_LIBDNET\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_LIBDNET\${ac_eB}HAVE_LIBDNET\${ac_eC}1\${ac_eD}
"
}

   LIBS="${LIBS} -ldnet"
fi


if test "${HAVE_X_WINDOWS}" = "yes"; then
  DEFS="$C_SWITCH_X_SITE $DEFS"
  LIBS="$LD_SWITCH_X_SITE $LIBS $LIBX"
fi

#
# make sure we can find libX11.*
#
internal_xlibs_found='no'
ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lX11"
ac_have_lib=""
test -n "$silent" || echo "checking for -lX11"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; internal_xlibs_found='yes'
else
   :; 
fi

if test "${internal_xlibs_found}" = "no" ; then
  echo "Unable to find X11 libraries." >&2
  exit 1
fi

#
# make sure we can find Intrinsic.h
#
internal_xincludes_found='no'
for arg in ${DEFS} /usr/include
do
  if test -f `echo "${arg}/X11/Intrinsic.h" | sed 's/^\-I//'` ; then
    internal_xincludes_found='yes'
  fi
done
if test "${internal_xincludes_found}" = "no" ; then
  echo "Unable to find X11 header files." >&2
  exit 1
fi

#
# if Energize specified, make sure we can find its need libraries/headers
#
if test "${with_energize}" = "yes" ; then
  ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lenergize"
ac_have_lib=""
test -n "$silent" || echo "checking for -lenergize"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; energize_version='3.X'
else
   :; 
fi

  if test "${energize_version}" = "no" ; then
    ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lconn"
ac_have_lib=""
test -n "$silent" || echo "checking for -lconn"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; energize_version='2.X'
else
   :; 
fi

    if test "${energize_version}" = "no" ; then
      echo "Unable to find Energize library." >&2
      exit 1
    fi
  fi

  internal_eincludes_found='no'
  for arg in ${DEFS} /usr/include
  do
    if test -f `echo "${arg}/editorconn.h" | sed 's/^\-I//'` ; then
      internal_eincludes_found='yes'
    fi
  done
  if test "${internal_eincludes_found}" = "no" ; then
    echo "Unable to find Energize editorconn.h header file." >&2
    exit 1
  fi
fi

# logb and frexp are found in -lm on most systems.
ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lm"
ac_have_lib=""
test -n "$silent" || echo "checking for -lm"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_LIBM"
echo "#define" HAVE_LIBM "1" >> confdefs.h
DEFS="$DEFS -DHAVE_LIBM=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_LIBM\${ac_dB}HAVE_LIBM\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_LIBM\${ac_uB}HAVE_LIBM\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_LIBM\${ac_eB}HAVE_LIBM\${ac_eC}1\${ac_eD}
"
}

   LIBS="${LIBS} -lm"
fi


# see if XPM is hanging around somewhere
if test "${with_xpm}" != "no" ; then
  if test "${with_xpm}" != "yes" ; then
    ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lXpm"
ac_have_lib=""
test -n "$silent" || echo "checking for -lXpm"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; with_xpm="yes"
else
   :; 
fi

    if test "${with_xpm}" = "yes" ; then
      test -n "$verbose" && echo "	defining HAVE_XPM"
    fi
  fi
fi

# if --with-extensions has been specified, make sure we can find IntrinsicI.h
# can't use ac_header_check cause its braindead
if test "${with_extensions}" = "yes" ; then
  intrinsici_found='no'
    for arg in ${DEFS} /usr/include
    do
      if test -f `echo "${arg}/IntrinsicI.h" | sed 's/^\-I//'` ; then
        intrinsici_found='yes'
      fi
    done
  if test "${intrinsici_found}" = "no" ; then
    (echo \
  "$progname: --with-extensions specified but unable to find IntrinsicI.h";
     echo \
  "Specify its location with the --site-includes flag") >&2
    exit 1
  fi
fi

# see if Motif is hanging around somewhere
if test "${with_motif}" != "no" ; then
  if test "${with_motif}" != "yes" ; then
    ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lXm"
ac_have_lib=""
test -n "$silent" || echo "checking for -lXm"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; with_motif="yes"
else
   :; 
fi

    if test "${with_motif}" = "yes" ; then
      test -n "$verbose" && echo "	defining LWLIB_USES_MOTIF"
    fi
  fi
fi

for ac_func in cbrt closedir dup2 frexp gethostname getpagesize gettimeofday getwd acosh asinh atanh logb matherr mkdir mmap perror random realpath rename res_init rint rmdir setsid strerror
do
ac_tr_func=HAVE_`echo $ac_func | tr '[a-z]' '[A-Z]'`
test -n "$silent" || echo "checking for ${ac_func}"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <ctype.h>
int main() { return 0; }
int t() { 
/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_${ac_func}) || defined (__stub___${ac_func})
choke me
#else
/* Override any gcc2 internal prototype to avoid an error.  */
extern char ${ac_func}(); ${ac_func}();
#endif
; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  {
test -n "$verbose" && \
echo "	defining ${ac_tr_func}"
echo "#define" ${ac_tr_func} "1" >> confdefs.h
DEFS="$DEFS -D${ac_tr_func}=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}${ac_tr_func}\${ac_dB}${ac_tr_func}\${ac_dC}1\${ac_dD}
\${ac_uA}${ac_tr_func}\${ac_uB}${ac_tr_func}\${ac_uC}1\${ac_uD}
\${ac_eA}${ac_tr_func}\${ac_eB}${ac_tr_func}\${ac_eC}1\${ac_eD}
"
}


fi
rm -f conftest*
done


ok_so_far=true
test -n "$silent" || echo "checking for socket"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <ctype.h>
int main() { return 0; }
int t() { 
/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
/* Override any gcc2 internal prototype to avoid an error.  */
extern char socket(); socket();
#endif
; return 0; }
EOF
if eval $ac_compile; then
  :
else
  rm -rf conftest*
  ok_so_far=
fi
rm -f conftest*

if test -n "$ok_so_far"; then
  test -n "$silent" || echo "checking for netinet/in.h"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <netinet/in.h>
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  :
else
  rm -rf conftest*
  ok_so_far=
fi
rm -f conftest*

fi
if test -n "$ok_so_far"; then
  test -n "$silent" || echo "checking for arpa/inet.h"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"
#include <arpa/inet.h>
EOF
# Some shells (Coherent) do redirections in the wrong order, so need
# the parens.
ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
if test -z "$ac_err"; then
  :
else
  rm -rf conftest*
  ok_so_far=
fi
rm -f conftest*

fi
if test -n "$ok_so_far"; then
  
{
test -n "$verbose" && \
echo "	defining HAVE_INET_SOCKETS"
echo "#define" HAVE_INET_SOCKETS "1" >> confdefs.h
DEFS="$DEFS -DHAVE_INET_SOCKETS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_INET_SOCKETS\${ac_dB}HAVE_INET_SOCKETS\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_INET_SOCKETS\${ac_uB}HAVE_INET_SOCKETS\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_INET_SOCKETS\${ac_eB}HAVE_INET_SOCKETS\${ac_eC}1\${ac_eD}
"
}

fi

#### Find out which version of Emacs this is.
version=`grep 'defconst[	 ]*emacs-version' ${srcdir}/lisp/version.el \
	 | sed -ne 's/^(defconst emacs-version "\([0-9][0-9]\.[0-9]*\).*/\1/p'`
beta=`grep 'concat emacs-version ' ${srcdir}/lisp/version.el \
      | sed -ne 's/^.*(concat emacs-version " Lucid (beta\([^)]*\)).*/\1/p'`
if [ "X$beta" != "X" ]; then
  version=${version}-b${beta}
fi
if [ x"${version}" = x ]; then
  echo "${progname}: can't find current emacs version in
	\`${srcdir}/lisp/version.el'." >&2
  exit 1
fi

if [ -f /usr/lpp/X11/bin/smt.exp ]; then
  
  
{
test -n "$verbose" && \
echo "	defining" AIX_SMT_EXP to be "/usr/lpp/X11/bin/smt.exp"
echo "#define" AIX_SMT_EXP "/usr/lpp/X11/bin/smt.exp" >> confdefs.h
DEFS="$DEFS -DAIX_SMT_EXP=/usr/lpp/X11/bin/smt.exp"
ac_sed_defs="${ac_sed_defs}\${ac_dA}AIX_SMT_EXP\${ac_dB}AIX_SMT_EXP\${ac_dC}/usr/lpp/X11/bin/smt.exp\${ac_dD}
\${ac_uA}AIX_SMT_EXP\${ac_uB}AIX_SMT_EXP\${ac_uC}/usr/lpp/X11/bin/smt.exp\${ac_uD}
\${ac_eA}AIX_SMT_EXP\${ac_eB}AIX_SMT_EXP\${ac_eC}/usr/lpp/X11/bin/smt.exp\${ac_eD}
"
}

  
elif [ -f /usr/bin/X11/smt.exp ]; then
  
  
{
test -n "$verbose" && \
echo "	defining" AIX_SMT_EXP to be "/usr/bin/X11/smt.exp"
echo "#define" AIX_SMT_EXP "/usr/bin/X11/smt.exp" >> confdefs.h
DEFS="$DEFS -DAIX_SMT_EXP=/usr/bin/X11/smt.exp"
ac_sed_defs="${ac_sed_defs}\${ac_dA}AIX_SMT_EXP\${ac_dB}AIX_SMT_EXP\${ac_dC}/usr/bin/X11/smt.exp\${ac_dD}
\${ac_uA}AIX_SMT_EXP\${ac_uB}AIX_SMT_EXP\${ac_uC}/usr/bin/X11/smt.exp\${ac_uD}
\${ac_eA}AIX_SMT_EXP\${ac_eB}AIX_SMT_EXP\${ac_eC}/usr/bin/X11/smt.exp\${ac_eD}
"
}

  
fi

if [ "${with_sound}" != "native" ] && [ "${with_sound}" != "netaudio" ] && [ "${with_sound}" != "both" ]; then
  case "${canonical}" in
    *-sun-sunos* | *-sun-bsd* )
      if [ -d /usr/demo/SOUND/multimedia ]; then
        with_sound="native"
      fi
    ;;
    *-sun-solaris* | *-sun-sunos5* )
      if [ -d /usr/demo/SOUND/include/multimedia ]; then
        with_sound="native"
      fi
    ;;
    *-sgi-* )
       ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -laudio"
ac_have_lib=""
test -n "$silent" || echo "checking for -laudio"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; with_sound="native"
else
   :; 
fi
 
    ;;
    hppa*-hp-hpux* )
       ac_save_LIBS="${LIBS}"
LIBS="${LIBS} -lAlib"
ac_have_lib=""
test -n "$silent" || echo "checking for -lAlib"
cat > conftest.${ac_ext} <<EOF
#include "confdefs.h"

int main() { return 0; }
int t() { main();; return 0; }
EOF
if eval $ac_compile; then
  rm -rf conftest*
  ac_have_lib="1"

fi
rm -f conftest*
LIBS="${ac_save_LIBS}"
if test -n "${ac_have_lib}"; then
   :; with_sound="native"
else
   :; 
fi
 
    ;;
  esac
fi

if [ "${with_tooltalk}" = "yes" ]; then
  for arg in ${DEFS} "-I/usr/include" "-I/usr/openwin/include"
  do
    if [ -f `echo "${arg}/desktop/tt_c.h" | sed 's/^\-I//'` ]; then
      C_SWITCH_X_SITE="${C_SWITCH_X_SITE} ${arg}/desktop"
    fi
  done

  for arg in ${LIBS} "-L/usr/lib" "-L/usr/openwin/lib"
  do
    if [ -f `echo "${arg}/libtt.a" | sed 's/^\-L//'` ]; then
      LD_SWITCH_X_SITE="${LD_SWITCH_X_SITE} ${arg}"
    fi
  done
fi

#### Specify what sort of things we'll be editing into Makefile and config.h.
### Use configuration here uncanonicalized to avoid exceeding size limits.



























{
test -n "$verbose" && \
echo "	defining" config_machfile to be ""\"${machfile}\"""
echo "#define" config_machfile ""\"${machfile}\""" >> confdefs.h
DEFS="$DEFS -Dconfig_machfile="\"${machfile}\"""
ac_sed_defs="${ac_sed_defs}\${ac_dA}config_machfile\${ac_dB}config_machfile\${ac_dC}"\"${machfile}\""\${ac_dD}
\${ac_uA}config_machfile\${ac_uB}config_machfile\${ac_uC}"\"${machfile}\""\${ac_uD}
\${ac_eA}config_machfile\${ac_eB}config_machfile\${ac_eC}"\"${machfile}\""\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" config_opsysfile to be ""\"${opsysfile}\"""
echo "#define" config_opsysfile ""\"${opsysfile}\""" >> confdefs.h
DEFS="$DEFS -Dconfig_opsysfile="\"${opsysfile}\"""
ac_sed_defs="${ac_sed_defs}\${ac_dA}config_opsysfile\${ac_dB}config_opsysfile\${ac_dC}"\"${opsysfile}\""\${ac_dD}
\${ac_uA}config_opsysfile\${ac_uB}config_opsysfile\${ac_uC}"\"${opsysfile}\""\${ac_uD}
\${ac_eA}config_opsysfile\${ac_eB}config_opsysfile\${ac_eC}"\"${opsysfile}\""\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" LD_SWITCH_X_SITE to be "${LD_SWITCH_X_SITE}"
echo "#define" LD_SWITCH_X_SITE "${LD_SWITCH_X_SITE}" >> confdefs.h
DEFS="$DEFS -DLD_SWITCH_X_SITE=${LD_SWITCH_X_SITE}"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LD_SWITCH_X_SITE\${ac_dB}LD_SWITCH_X_SITE\${ac_dC}${LD_SWITCH_X_SITE}\${ac_dD}
\${ac_uA}LD_SWITCH_X_SITE\${ac_uB}LD_SWITCH_X_SITE\${ac_uC}${LD_SWITCH_X_SITE}\${ac_uD}
\${ac_eA}LD_SWITCH_X_SITE\${ac_eB}LD_SWITCH_X_SITE\${ac_eC}${LD_SWITCH_X_SITE}\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" C_SWITCH_X_SITE to be "${C_SWITCH_X_SITE}"
echo "#define" C_SWITCH_X_SITE "${C_SWITCH_X_SITE}" >> confdefs.h
DEFS="$DEFS -DC_SWITCH_X_SITE=${C_SWITCH_X_SITE}"
ac_sed_defs="${ac_sed_defs}\${ac_dA}C_SWITCH_X_SITE\${ac_dB}C_SWITCH_X_SITE\${ac_dC}${C_SWITCH_X_SITE}\${ac_dD}
\${ac_uA}C_SWITCH_X_SITE\${ac_uB}C_SWITCH_X_SITE\${ac_uC}${C_SWITCH_X_SITE}\${ac_uD}
\${ac_eA}C_SWITCH_X_SITE\${ac_eB}C_SWITCH_X_SITE\${ac_eC}${C_SWITCH_X_SITE}\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" LD_SWITCH_SITE to be "${LD_SWITCH_SITE}"
echo "#define" LD_SWITCH_SITE "${LD_SWITCH_SITE}" >> confdefs.h
DEFS="$DEFS -DLD_SWITCH_SITE=${LD_SWITCH_SITE}"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LD_SWITCH_SITE\${ac_dB}LD_SWITCH_SITE\${ac_dC}${LD_SWITCH_SITE}\${ac_dD}
\${ac_uA}LD_SWITCH_SITE\${ac_uB}LD_SWITCH_SITE\${ac_uC}${LD_SWITCH_SITE}\${ac_uD}
\${ac_eA}LD_SWITCH_SITE\${ac_eB}LD_SWITCH_SITE\${ac_eC}${LD_SWITCH_SITE}\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" C_SWITCH_SITE to be "${C_SWITCH_SITE}"
echo "#define" C_SWITCH_SITE "${C_SWITCH_SITE}" >> confdefs.h
DEFS="$DEFS -DC_SWITCH_SITE=${C_SWITCH_SITE}"
ac_sed_defs="${ac_sed_defs}\${ac_dA}C_SWITCH_SITE\${ac_dB}C_SWITCH_SITE\${ac_dC}${C_SWITCH_SITE}\${ac_dD}
\${ac_uA}C_SWITCH_SITE\${ac_uB}C_SWITCH_SITE\${ac_uC}${C_SWITCH_SITE}\${ac_uD}
\${ac_eA}C_SWITCH_SITE\${ac_eB}C_SWITCH_SITE\${ac_eC}${C_SWITCH_SITE}\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" UNEXEC_SRC to be "${UNEXEC_SRC}"
echo "#define" UNEXEC_SRC "${UNEXEC_SRC}" >> confdefs.h
DEFS="$DEFS -DUNEXEC_SRC=${UNEXEC_SRC}"
ac_sed_defs="${ac_sed_defs}\${ac_dA}UNEXEC_SRC\${ac_dB}UNEXEC_SRC\${ac_dC}${UNEXEC_SRC}\${ac_dD}
\${ac_uA}UNEXEC_SRC\${ac_uB}UNEXEC_SRC\${ac_uC}${UNEXEC_SRC}\${ac_uD}
\${ac_eA}UNEXEC_SRC\${ac_eB}UNEXEC_SRC\${ac_eC}${UNEXEC_SRC}\${ac_eD}
"
}


{
test -n "$verbose" && \
echo "	defining" CONFIGURATION to be ""\"${configuration}\"""
echo "#define" CONFIGURATION ""\"${configuration}\""" >> confdefs.h
DEFS="$DEFS -DCONFIGURATION="\"${configuration}\"""
ac_sed_defs="${ac_sed_defs}\${ac_dA}CONFIGURATION\${ac_dB}CONFIGURATION\${ac_dC}"\"${configuration}\""\${ac_dD}
\${ac_uA}CONFIGURATION\${ac_uB}CONFIGURATION\${ac_uC}"\"${configuration}\""\${ac_uD}
\${ac_eA}CONFIGURATION\${ac_eB}CONFIGURATION\${ac_eC}"\"${configuration}\""\${ac_eD}
"
}



if [ "${HAVE_X_WINDOWS}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_X_WINDOWS"
echo "#define" HAVE_X_WINDOWS "1" >> confdefs.h
DEFS="$DEFS -DHAVE_X_WINDOWS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_X_WINDOWS\${ac_dB}HAVE_X_WINDOWS\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_X_WINDOWS\${ac_uB}HAVE_X_WINDOWS\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_X_WINDOWS\${ac_eB}HAVE_X_WINDOWS\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${HAVE_XFREE386}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_XFREE386"
echo "#define" HAVE_XFREE386 "1" >> confdefs.h
DEFS="$DEFS -DHAVE_XFREE386=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_XFREE386\${ac_dB}HAVE_XFREE386\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_XFREE386\${ac_uB}HAVE_XFREE386\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_XFREE386\${ac_eB}HAVE_XFREE386\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${GNU_MALLOC}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining GNU_MALLOC"
echo "#define" GNU_MALLOC "1" >> confdefs.h
DEFS="$DEFS -DGNU_MALLOC=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}GNU_MALLOC\${ac_dB}GNU_MALLOC\${ac_dC}1\${ac_dD}
\${ac_uA}GNU_MALLOC\${ac_uB}GNU_MALLOC\${ac_uC}1\${ac_uD}
\${ac_eA}GNU_MALLOC\${ac_eB}GNU_MALLOC\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${REL_ALLOC}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining REL_ALLOC"
echo "#define" REL_ALLOC "1" >> confdefs.h
DEFS="$DEFS -DREL_ALLOC=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}REL_ALLOC\${ac_dB}REL_ALLOC\${ac_dC}1\${ac_dD}
\${ac_uA}REL_ALLOC\${ac_uB}REL_ALLOC\${ac_uC}1\${ac_uD}
\${ac_eA}REL_ALLOC\${ac_eB}REL_ALLOC\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${LISP_FLOAT_TYPE}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining LISP_FLOAT_TYPE"
echo "#define" LISP_FLOAT_TYPE "1" >> confdefs.h
DEFS="$DEFS -DLISP_FLOAT_TYPE=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LISP_FLOAT_TYPE\${ac_dB}LISP_FLOAT_TYPE\${ac_dC}1\${ac_dD}
\${ac_uA}LISP_FLOAT_TYPE\${ac_uB}LISP_FLOAT_TYPE\${ac_uC}1\${ac_uD}
\${ac_eA}LISP_FLOAT_TYPE\${ac_eB}LISP_FLOAT_TYPE\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_motif}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining LWLIB_USES_MOTIF"
echo "#define" LWLIB_USES_MOTIF "1" >> confdefs.h
DEFS="$DEFS -DLWLIB_USES_MOTIF=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LWLIB_USES_MOTIF\${ac_dB}LWLIB_USES_MOTIF\${ac_dC}1\${ac_dD}
\${ac_uA}LWLIB_USES_MOTIF\${ac_uB}LWLIB_USES_MOTIF\${ac_uC}1\${ac_uD}
\${ac_eA}LWLIB_USES_MOTIF\${ac_eB}LWLIB_USES_MOTIF\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_openlook}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining LWLIB_USES_OLIT"
echo "#define" LWLIB_USES_OLIT "1" >> confdefs.h
DEFS="$DEFS -DLWLIB_USES_OLIT=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LWLIB_USES_OLIT\${ac_dB}LWLIB_USES_OLIT\${ac_dC}1\${ac_dD}
\${ac_uA}LWLIB_USES_OLIT\${ac_uB}LWLIB_USES_OLIT\${ac_uC}1\${ac_uD}
\${ac_eA}LWLIB_USES_OLIT\${ac_eB}LWLIB_USES_OLIT\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_lucid}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining LWLIB_USES_LUCID"
echo "#define" LWLIB_USES_LUCID "1" >> confdefs.h
DEFS="$DEFS -DLWLIB_USES_LUCID=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}LWLIB_USES_LUCID\${ac_dB}LWLIB_USES_LUCID\${ac_dC}1\${ac_dD}
\${ac_uA}LWLIB_USES_LUCID\${ac_uB}LWLIB_USES_LUCID\${ac_uC}1\${ac_uD}
\${ac_eA}LWLIB_USES_LUCID\${ac_eB}LWLIB_USES_LUCID\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_tooltalk}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining TOOLTALK"
echo "#define" TOOLTALK "1" >> confdefs.h
DEFS="$DEFS -DTOOLTALK=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}TOOLTALK\${ac_dB}TOOLTALK\${ac_dC}1\${ac_dD}
\${ac_uA}TOOLTALK\${ac_uB}TOOLTALK\${ac_uC}1\${ac_uD}
\${ac_eA}TOOLTALK\${ac_eB}TOOLTALK\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_sparcworks}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining SUNPRO"
echo "#define" SUNPRO "1" >> confdefs.h
DEFS="$DEFS -DSUNPRO=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}SUNPRO\${ac_dB}SUNPRO\${ac_dC}1\${ac_dD}
\${ac_uA}SUNPRO\${ac_uB}SUNPRO\${ac_uC}1\${ac_uD}
\${ac_eA}SUNPRO\${ac_eB}SUNPRO\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${runnable_temacs}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining RUNNABLE_TEMACS"
echo "#define" RUNNABLE_TEMACS "1" >> confdefs.h
DEFS="$DEFS -DRUNNABLE_TEMACS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}RUNNABLE_TEMACS\${ac_dB}RUNNABLE_TEMACS\${ac_dC}1\${ac_dD}
\${ac_uA}RUNNABLE_TEMACS\${ac_uB}RUNNABLE_TEMACS\${ac_uC}1\${ac_uD}
\${ac_eA}RUNNABLE_TEMACS\${ac_eB}RUNNABLE_TEMACS\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${usage_tracking}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining USAGE_TRACKING"
echo "#define" USAGE_TRACKING "1" >> confdefs.h
DEFS="$DEFS -DUSAGE_TRACKING=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}USAGE_TRACKING\${ac_dB}USAGE_TRACKING\${ac_dC}1\${ac_dD}
\${ac_uA}USAGE_TRACKING\${ac_uB}USAGE_TRACKING\${ac_uC}1\${ac_uD}
\${ac_eA}USAGE_TRACKING\${ac_eB}USAGE_TRACKING\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_energize}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining ENERGIZE"
echo "#define" ENERGIZE "1" >> confdefs.h
DEFS="$DEFS -DENERGIZE=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}ENERGIZE\${ac_dB}ENERGIZE\${ac_dC}1\${ac_dD}
\${ac_uA}ENERGIZE\${ac_uB}ENERGIZE\${ac_uC}1\${ac_uD}
\${ac_eA}ENERGIZE\${ac_eB}ENERGIZE\${ac_eC}1\${ac_eD}
"
}
 
  if [ "${energize_version}" = "2.X" ] ; then
     
{
test -n "$verbose" && \
echo "	defining ENERGIZE_2"
echo "#define" ENERGIZE_2 "1" >> confdefs.h
DEFS="$DEFS -DENERGIZE_2=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}ENERGIZE_2\${ac_dB}ENERGIZE_2\${ac_dC}1\${ac_dD}
\${ac_uA}ENERGIZE_2\${ac_uB}ENERGIZE_2\${ac_uC}1\${ac_uD}
\${ac_eA}ENERGIZE_2\${ac_eB}ENERGIZE_2\${ac_eC}1\${ac_eD}
"
}
 
  elif [ "${energize_version}" = "3.X" ] ; then
     
{
test -n "$verbose" && \
echo "	defining ENERGIZE_3"
echo "#define" ENERGIZE_3 "1" >> confdefs.h
DEFS="$DEFS -DENERGIZE_3=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}ENERGIZE_3\${ac_dB}ENERGIZE_3\${ac_dC}1\${ac_dD}
\${ac_uA}ENERGIZE_3\${ac_uB}ENERGIZE_3\${ac_uC}1\${ac_uD}
\${ac_eA}ENERGIZE_3\${ac_eB}ENERGIZE_3\${ac_eC}1\${ac_eD}
"
}
 
  fi
fi
if [ "${with_gcc}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining USE_GCC"
echo "#define" USE_GCC "1" >> confdefs.h
DEFS="$DEFS -DUSE_GCC=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}USE_GCC\${ac_dB}USE_GCC\${ac_dC}1\${ac_dD}
\${ac_uA}USE_GCC\${ac_uB}USE_GCC\${ac_uC}1\${ac_uD}
\${ac_eA}USE_GCC\${ac_eB}USE_GCC\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_lcc}" = "yes" ] ; then
   
{
test -n "$verbose" && \
echo "	defining USE_LCC"
echo "#define" USE_LCC "1" >> confdefs.h
DEFS="$DEFS -DUSE_LCC=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}USE_LCC\${ac_dB}USE_LCC\${ac_dC}1\${ac_dD}
\${ac_uA}USE_LCC\${ac_uB}USE_LCC\${ac_uC}1\${ac_uD}
\${ac_eA}USE_LCC\${ac_eB}USE_LCC\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_xpm}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_XPM"
echo "#define" HAVE_XPM "1" >> confdefs.h
DEFS="$DEFS -DHAVE_XPM=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_XPM\${ac_dB}HAVE_XPM\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_XPM\${ac_uB}HAVE_XPM\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_XPM\${ac_eB}HAVE_XPM\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_epoch}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining EPOCH"
echo "#define" EPOCH "1" >> confdefs.h
DEFS="$DEFS -DEPOCH=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}EPOCH\${ac_dB}EPOCH\${ac_dC}1\${ac_dD}
\${ac_uA}EPOCH\${ac_uB}EPOCH\${ac_uC}1\${ac_uD}
\${ac_eA}EPOCH\${ac_eB}EPOCH\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_extensions}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining USE_EXTENSIONS"
echo "#define" USE_EXTENSIONS "1" >> confdefs.h
DEFS="$DEFS -DUSE_EXTENSIONS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}USE_EXTENSIONS\${ac_dB}USE_EXTENSIONS\${ac_dC}1\${ac_dD}
\${ac_uA}USE_EXTENSIONS\${ac_uB}USE_EXTENSIONS\${ac_uC}1\${ac_uD}
\${ac_eA}USE_EXTENSIONS\${ac_eB}USE_EXTENSIONS\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${dont_have_xmu}" != "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_XMU"
echo "#define" HAVE_XMU "1" >> confdefs.h
DEFS="$DEFS -DHAVE_XMU=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_XMU\${ac_dB}HAVE_XMU\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_XMU\${ac_uB}HAVE_XMU\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_XMU\${ac_eB}HAVE_XMU\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_sound}" = "native" -o  "${with_sound}" = "both" ]; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_NATIVE_SOUND"
echo "#define" HAVE_NATIVE_SOUND "1" >> confdefs.h
DEFS="$DEFS -DHAVE_NATIVE_SOUND=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_NATIVE_SOUND\${ac_dB}HAVE_NATIVE_SOUND\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_NATIVE_SOUND\${ac_uB}HAVE_NATIVE_SOUND\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_NATIVE_SOUND\${ac_eB}HAVE_NATIVE_SOUND\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${with_sound}" = "netaudio" -o  "${with_sound}" = "both" ]; then
   
{
test -n "$verbose" && \
echo "	defining HAVE_NETAUDIO_SOUND"
echo "#define" HAVE_NETAUDIO_SOUND "1" >> confdefs.h
DEFS="$DEFS -DHAVE_NETAUDIO_SOUND=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}HAVE_NETAUDIO_SOUND\${ac_dB}HAVE_NETAUDIO_SOUND\${ac_dC}1\${ac_dD}
\${ac_uA}HAVE_NETAUDIO_SOUND\${ac_uB}HAVE_NETAUDIO_SOUND\${ac_uC}1\${ac_uD}
\${ac_eA}HAVE_NETAUDIO_SOUND\${ac_eB}HAVE_NETAUDIO_SOUND\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${external_widget}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining EXTERNAL_WIDGET"
echo "#define" EXTERNAL_WIDGET "1" >> confdefs.h
DEFS="$DEFS -DEXTERNAL_WIDGET=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}EXTERNAL_WIDGET\${ac_dB}EXTERNAL_WIDGET\${ac_dC}1\${ac_dD}
\${ac_uA}EXTERNAL_WIDGET\${ac_uB}EXTERNAL_WIDGET\${ac_uC}1\${ac_uD}
\${ac_eA}EXTERNAL_WIDGET\${ac_eB}EXTERNAL_WIDGET\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${const_is_losing}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining CONST_IS_LOSING"
echo "#define" CONST_IS_LOSING "1" >> confdefs.h
DEFS="$DEFS -DCONST_IS_LOSING=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}CONST_IS_LOSING\${ac_dB}CONST_IS_LOSING\${ac_dC}1\${ac_dD}
\${ac_uA}CONST_IS_LOSING\${ac_uB}CONST_IS_LOSING\${ac_uC}1\${ac_uD}
\${ac_eA}CONST_IS_LOSING\${ac_eB}CONST_IS_LOSING\${ac_eC}1\${ac_eD}
"
}
 
fi
if [ "${use_assertions}" = "yes" ]; then
   
{
test -n "$verbose" && \
echo "	defining USE_ASSERTIONS"
echo "#define" USE_ASSERTIONS "1" >> confdefs.h
DEFS="$DEFS -DUSE_ASSERTIONS=1"
ac_sed_defs="${ac_sed_defs}\${ac_dA}USE_ASSERTIONS\${ac_dB}USE_ASSERTIONS\${ac_dC}1\${ac_dD}
\${ac_uA}USE_ASSERTIONS\${ac_uB}USE_ASSERTIONS\${ac_uC}1\${ac_uD}
\${ac_eA}USE_ASSERTIONS\${ac_eB}USE_ASSERTIONS\${ac_eC}1\${ac_eD}
"
}
 
fi


#### Report on what we decided to do.
echo "

Configured for \`${canonical}'.

  Where should the build process find the source code?    ${srcdir}
  What installation prefix should install use?		  ${prefix}
  What operating system and machine description files should Emacs use?
        \`${opsysfile}' and \`${machfile}'
  What compiler should emacs be built with?               ${CC} ${CFLAGS}
  Should Emacs use the GNU version of malloc?             ${GNU_MALLOC}${GNU_MALLOC_reason}
  Should Emacs use the relocating allocator for buffers?  ${REL_ALLOC}
  What window system should Emacs use?                    ${window_system}${x_includes+
  Where do we find X Windows header files?                }${x_includes}${x_libraries+
  Where do we find X Windows libraries?                   }${x_libraries}"

if [ -n "$site_includes" ]; then
  echo "  Additional header files:                                ${site_includes}"
fi

if [ -n "$site_libraries" ]; then
  echo "  Additional libraries:                                   ${site_libraries}"
fi

if [ "$with_xpm" = "yes" ]; then
  echo "  Compiling in support for XPM."
fi
if [ "$with_epoch" = "yes" ]; then
  echo "  Compiling in extra Epoch compatibility."
fi
if [ "$with_extensions" = "yes" ]; then
  echo "  Compiling in support for lwlib extensions."
fi
if [ "$with_sound" = "netaudio" ]; then
  echo "  Compiling in netaudio support."
fi
if [ "$with_sound" = "native" ]; then
  echo "  Compiling in native sound support."
fi
if [ "$with_sound" = "both" ]; then
  echo "  Compiling in both netaudio and native sound support."
fi
if [ "$with_tooltalk" = "yes" ]; then
  echo "  Compiling in support for ToolTalk."
fi
if [ "$with_sparcworks" = "yes" ]; then
  echo "  Compiling in support for SparcWorks."
fi
if [ "$with_energize" = "yes" ]; then
  echo "  Compiling in support for Lucid Energize."
fi
if [ "$with_motif" = "yes" ]; then
  echo "  Using the Motif toolkit."
fi
if [ "$with_openlook" = "yes" ]; then
  echo "  Using the OpenLook toolkit."
fi
if [ "$runnable_temacs" = "yes" ]; then
  echo "  Creating a runnable temacs."
fi
if [ "$usage_tracking" = "yes" ]; then
  echo "  Compiling with usage tracking active."
fi
echo "
"

# This has to be called in order for this variable to get into config.status
  
# Remove any trailing slashes in these variables.
test -n "${prefix}" &&
  prefix=`echo "${prefix}" | sed 's,\([^/]\)/*$,\1,'`
test -n "${exec_prefix}" &&
  exec_prefix=`echo "${exec_prefix}" | sed 's,\([^/]\)/*$,\1,'`


# The preferred way to propogate these variables is regular @ substitutions.
if test -n "$prefix"; then
  ac_prsub="s%^prefix\\([ 	]*\\)=\\([ 	]*\\).*$%prefix\\1=\\2$prefix%"
else
  prefix=/usr/local
fi
if test -n "$exec_prefix"; then
  ac_prsub="$ac_prsub
s%^exec_prefix\\([ 	]*\\)=\\([ 	]*\\).*$%exec_prefix\\1=\\2$exec_prefix%"
else
  exec_prefix='${prefix}' # Let make expand it.
fi

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

# Quote sed substitution magic chars in DEFS.
cat >conftest.def <<EOF
$DEFS
EOF
ac_escape_ampersand_and_backslash='s%[&\\]%\\&%g'
DEFS=`sed "$ac_escape_ampersand_and_backslash" <conftest.def`
rm -f conftest.def
# Substitute for predefined variables.

trap 'rm -f config.status; exit 1' 1 2 15
echo creating config.status
rm -f config.status
cat > config.status <<EOF
#!/bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $configure_args

ac_cs_usage="Usage: config.status [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo running \${CONFIG_SHELL-/bin/sh} $0 $configure_args --no-create
    exec \${CONFIG_SHELL-/bin/sh} $0 $configure_args --no-create ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "config.status generated by autoconf version 1.11"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

trap 'rm -fr $internal_makefile_list src/config.h conftest*; exit 1' 1 2 15
CC='$CC'
LN_S='$LN_S'
CPP='$CPP'
SET_MAKE='$SET_MAKE'
RANLIB='$RANLIB'
INSTALL='$INSTALL'
INSTALL_PROGRAM='$INSTALL_PROGRAM'
INSTALL_DATA='$INSTALL_DATA'
YACC='$YACC'
configuration='$configuration'
version='$version'
srcdir='$srcdir'
prefix='$prefix'
exec_prefix='$exec_prefix'
bindir='$bindir'
datadir='$datadir'
statedir='$statedir'
libdir='$libdir'
mandir='$mandir'
infodir='$infodir'
lispdir='$lispdir'
sitelispdir='$sitelispdir'
etcdir='$etcdir'
lockdir='$lockdir'
archlibdir='$archlibdir'
c_switch_system='$c_switch_system'
c_switch_machine='$c_switch_machine'
libsrc_libs='$libsrc_libs'
LD_SWITCH_X_SITE='$LD_SWITCH_X_SITE'
C_SWITCH_X_SITE='$C_SWITCH_X_SITE'
LD_SWITCH_SITE='$LD_SWITCH_SITE'
C_SWITCH_SITE='$C_SWITCH_SITE'
CFLAGS='$CFLAGS'
internal_makefile_list='$internal_makefile_list'
LIBS='$LIBS'
top_srcdir='$top_srcdir'
ac_prsub='$ac_prsub'
ac_vpsub='$ac_vpsub'
extrasub='$extrasub'
EOF
cat >> config.status <<\EOF

ac_given_srcdir=$srcdir

CONFIG_FILES=${CONFIG_FILES-"$internal_makefile_list"}
for ac_file in .. ${CONFIG_FILES}; do if test "x$ac_file" != x..; then
  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/$ac_dir"
  else
    ac_dir_suffix=
  fi

  # A "../" for each directory in $ac_dir_suffix.
  ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dir_suffix"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  echo creating "$ac_file"
  rm -f "$ac_file"
  comment_str="Generated automatically from `echo $ac_file|sed 's|.*/||'`.in by configure."
  case "$ac_file" in
    *.c | *.h | *.C | *.cc | *.m )  echo "/* $comment_str */" > "$ac_file" ;;
    * )          echo "# $comment_str"     > "$ac_file" ;;
  esac
  sed -e "
$ac_prsub
$ac_vpsub
$extrasub
s%@CC@%$CC%g
s%@LN_S@%$LN_S%g
s%@CPP@%$CPP%g
s%@SET_MAKE@%$SET_MAKE%g
s%@RANLIB@%$RANLIB%g
s%@INSTALL@%$INSTALL%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@YACC@%$YACC%g
s%@configuration@%$configuration%g
s%@version@%$version%g
s%@srcdir@%$srcdir%g
s%@prefix@%$prefix%g
s%@exec_prefix@%$exec_prefix%g
s%@bindir@%$bindir%g
s%@datadir@%$datadir%g
s%@statedir@%$statedir%g
s%@libdir@%$libdir%g
s%@mandir@%$mandir%g
s%@infodir@%$infodir%g
s%@lispdir@%$lispdir%g
s%@sitelispdir@%$sitelispdir%g
s%@etcdir@%$etcdir%g
s%@lockdir@%$lockdir%g
s%@archlibdir@%$archlibdir%g
s%@c_switch_system@%$c_switch_system%g
s%@c_switch_machine@%$c_switch_machine%g
s%@libsrc_libs@%$libsrc_libs%g
s%@LD_SWITCH_X_SITE@%$LD_SWITCH_X_SITE%g
s%@C_SWITCH_X_SITE@%$C_SWITCH_X_SITE%g
s%@LD_SWITCH_SITE@%$LD_SWITCH_SITE%g
s%@C_SWITCH_SITE@%$C_SWITCH_SITE%g
s%@CFLAGS@%$CFLAGS%g
s%@internal_makefile_list@%$internal_makefile_list%g
s%@LIBS@%$LIBS%g
s%@top_srcdir@%$top_srcdir%g
s%@DEFS@%-DHAVE_CONFIG_H%" $ac_given_srcdir/${ac_file}.in >> $ac_file
fi; done

# These sed commands are put into ac_sed_defs when defining a macro.
# They are broken into pieces to make the sed script easier to manage.
# They are passed to sed as "A NAME B NAME C VALUE D", where NAME
# is the cpp macro being defined and VALUE is the value it is being given.
# Each defining turns into a single global substitution command.
# Hopefully no one uses "!" as a variable value.
# Other candidates for the sed separators, like , and @, do get used.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s!^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*!\1#\2'
ac_dC='\3'
ac_dD='!g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s!^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)!\1#\2define\3'
ac_uC=' '
ac_uD='\4!g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s!^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$!\1#\2define\3'
ac_eC=' '
ac_eD='!g'
rm -f conftest.sed
EOF
# Turn off quoting long enough to insert the sed commands.
rm -f conftest.sh
cat > conftest.sh <<EOF
$ac_sed_defs
EOF

# Break up $ac_sed_defs (now in conftest.sh) because some shells have a limit
# on the size of here documents.

# Maximum number of lines to put in a single here document.
ac_max_sh_lines=9

while :
do
  # wc gives bogus results for an empty file on some AIX systems.
  ac_lines=`grep -c . conftest.sh`
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  rm -f conftest.s1 conftest.s2
  sed ${ac_max_sh_lines}q conftest.sh > conftest.s1 # Like head -9.
  sed 1,${ac_max_sh_lines}d conftest.sh > conftest.s2 # Like tail +10.
  # Write a limited-size here document to append to conftest.sed.
  echo 'cat >> conftest.sed <<CONFEOF' >> config.status
  cat conftest.s1 >> config.status
  echo 'CONFEOF' >> config.status
  rm -f conftest.s1 conftest.sh
  mv conftest.s2 conftest.sh
done
rm -f conftest.sh

# Now back to your regularly scheduled config.status.
cat >> config.status <<\EOF
# This sed command replaces #undef's with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it in
# src/config.h.
cat >> conftest.sed <<\CONFEOF
s,^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
CONFEOF
rm -f conftest.h
# Break up the sed commands because old seds have small limits.
ac_max_sed_lines=20

CONFIG_HEADERS=${CONFIG_HEADERS-"src/config.h"}
for ac_file in .. ${CONFIG_HEADERS}; do if test "x$ac_file" != x..; then
  echo creating $ac_file

  cp $ac_given_srcdir/$ac_file.in conftest.h1
  cp conftest.sed conftest.stm
  while :
  do
    ac_lines=`grep -c . conftest.stm`
    if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
    rm -f conftest.s1 conftest.s2 conftest.h2
    sed ${ac_max_sed_lines}q conftest.stm > conftest.s1 # Like head -20.
    sed 1,${ac_max_sed_lines}d conftest.stm > conftest.s2 # Like tail +21.
    sed -f conftest.s1 < conftest.h1 > conftest.h2
    rm -f conftest.s1 conftest.h1 conftest.stm
    mv conftest.h2 conftest.h1
    mv conftest.s2 conftest.stm
  done
  rm -f conftest.stm conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.h1 >> conftest.h
  rm -f conftest.h1
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    # The file exists and we would not be changing it.
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done
rm -f conftest.sed



exit 0
EOF
chmod +x config.status
# Some shells look in PATH for config.status without the "./".
test -n "$no_create" || ${CONFIG_SHELL-/bin/sh} ./config.status
 
# Build src/Makefile from ${srcdir}/src/Makefile.in and lwlib/Makefile
# from ${srcdir}/lwlib/Makefile.in.  This must be done after src/config.h
# is built, since we rely on that file.  Only do the build if
# "config.status" is present, since it's non-presence indicates
# an error occured.
status=$?
if [ ! -f ./config.status ]; then
   exit $status
fi
topsrcdir=${srcdir}
  # We discard all lines in Makefile.in that start with `# Generated' or /**/#
  # because some cpps get confused by them.
  # Really we should preserve them somehow into Makefile,
  # but that is beyond my level of shell programming.
makefile_command='echo "creating src/Makefile";
  topsrcdir='"${topsrcdir}"';
( cd ./src;
  rm -f junk.c;
  sed -e '\''s/^# Generated.*//'\'' -e '\''s%/\*\*/#.*%%'\'' < Makefile.in > junk.c;
  eval `echo ${CPP} -I. -I${topsrcdir}/src ${CPPFLAGS} junk.c \>junk.cpp`;
  < junk.cpp							'\
'    sed -e '\''s/^#.*//'\''					'\
'	-e '\''s/^[ \f\t][ \f\t]*$//'\''			'\
'	-e '\''s/^ /	/'\'' 					'\
'	| sed -n -e '\''/^..*$/p'\''				'\
'	> Makefile.new;
    chmod 444 Makefile.new;
    mv -f Makefile.new Makefile;
    rm -f junk.c junk.cpp;
)'
eval `echo $makefile_command`
lwlib_makefile_command='echo "creating lwlib/Makefile";
  topsrcdir='"${topsrcdir}"';
( cd ./lwlib;
  rm -f junk.c;
  sed -e '\''s/^# Generated.*//'\'' -e '\''s%/\*\*/#.*%%'\'' < Makefile.in > junk.c;
  eval `echo ${CPP} -I. -I${topsrcdir}/src ${CPPFLAGS} junk.c \>junk.cpp`;
  < junk.cpp							'\
'    sed -e '\''s/^#.*//'\''					'\
'	-e '\''s/^[ \f\t][ \f\t]*$//'\''			'\
'	-e '\''s/^ /	/'\'' 					'\
'	| sed -n -e '\''/^..*$/p'\''				'\
'	> Makefile.new;
    chmod 444 Makefile.new;
    mv -f Makefile.new Makefile;
    rm -f junk.c junk.cpp;
)'
eval `echo $lwlib_makefile_command`
if [ "${with_energize}" = "yes" ]; then
energize_makefile_command='echo "creating lwlib/energize/Makefile";
  topsrcdir='"${topsrcdir}"';
( cd ./lwlib/energize;
  rm -f junk.c;
  sed -e '\''s/^# Generated.*//'\'' -e '\''s%/\*\*/#.*%%'\'' < Makefile.in > junk.c;
  eval `echo ${CPP} -I. -I${topsrcdir}/src ${CPPFLAGS} junk.c \>junk.cpp`;
  < junk.cpp							'\
'    sed -e '\''s/^#.*//'\''					'\
'	-e '\''s/^[ \f\t][ \f\t]*$//'\''			'\
'	-e '\''s/^ /	/'\'' 					'\
'	| sed -n -e '\''/^..*$/p'\''				'\
'	> Makefile.new;
    chmod 444 Makefile.new;
    mv -f Makefile.new Makefile;
    rm -f junk.c junk.cpp;
)'
eval `echo $energize_makefile_command`
fi
# AC-OUTPUT has created `config.status' already.  We need to add the
# above commands to re-create `src/Makefile' and `lwlib/Makefile' and
# possibly `lwlib/energize/Makefile', and we need to insert them
# before the final "exit 0" which appears at the end of
# `config.status'.
<config.status sed -e 's/^exit 0$//' >config.new
echo $makefile_command >>config.new
echo $lwlib_makefile_command >>config.new
if [ "${with_energize}" = "yes" ]; then
  echo $energize_makefile_command >>config.new
fi
echo exit 0 >>config.new
mv -f config.new config.status
chmod +x config.status
# Don't let the fact that we just rewrote config.status make Makefile think
# that it is now newer.  We have just rewritten all of the Makefiles as well.
MFS="Makefile src/Makefile src/Makefile.in lib-src/Makefile"
for file in $MFS; do
   chmod a+w $file; touch $file; chmod 444 $file
done
exit 0

